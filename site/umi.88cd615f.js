(function(e){function n(n){for(var a,o,i=n[0],c=n[1],s=n[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(n);while(d.length)d.shift()();return l.push.apply(l,s||[]),t()}function t(){for(var e,n=0;n<l.length;n++){for(var t=l[n],a=!0,i=1;i<t.length;i++){var c=t[i];0!==r[c]&&(a=!1)}a&&(l.splice(n--,1),e=o(o.s=t[0]))}return e}var a={},r={0:0},l=[];function o(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=a,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)o.d(t,a,function(n){return e[n]}.bind(null,a));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="https://caijf.github.io/mobx-async-state/site/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=n,i=i.slice();for(var s=0;s<i.length;s++)n(i[s]);var u=c;l.push([0,1]),t()})({0:function(e,n,t){e.exports=t("tB8F")},"2PqJ":function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t("luuv"),r=t.n(a),l=e=>{var n=e.page,t=(n.pageNum,n.pageSize);e.data;return r.a.mock({["data|".concat(t)]:[{id:"@guid",name:"@cname","gender|1":["male","female"],email:"@email",disabled:!1}],pageInfo:{total:25},errCode:"00",errMsg:""})};function o(e){return console.log(e),new Promise(n=>{setTimeout(()=>{n(l(e))},1e3)})}},"7RaP":function(e,n,t){"use strict";t.r(n);t("H0JD");var a=t("q1tI"),r=t.n(a),l=t("riab"),o=t("tjUo"),i=t("luuv"),c=t.n(i);function s(){return new Promise(e=>{setTimeout(()=>{e(c.a.mock("@name"))},1e3)})}var u=new o["a"](s);n["default"]=Object(l["a"])(()=>{var e=u.loading,n=u.error,t=u.data;return e?r.a.createElement("div",null,"loading..."):n?r.a.createElement("div",null,"failed to load"):r.a.createElement("div",null,"Username: ",t)})},"96It":function(e,n,t){"use strict";t.r(n);t("+L6B");var a=t("2/Rp"),r=(t("miYZ"),t("tsqr")),l=t("q1tI"),o=t.n(l),i=t("riab"),c=t("tjUo");function s(e){return console.log(e),new Promise(e=>{setTimeout(()=>{e({success:!0})},1e3)})}var u=Object(i["a"])(e=>{var n=e.id,t=e.username,i=Object(l["useMemo"])(()=>new c["a"](s,{autoRun:!1}),[]),u=i.run,m=i.loading,d=Object(l["useCallback"])(e=>{u(e).then(e=>{e.success&&r["a"].success("Delete user ".concat(t))})},[]);return o.a.createElement(a["a"],{loading:m,onClick:()=>{d(n)}},"delete ",t)});n["default"]=()=>{var e=[{id:"1",username:"A"},{id:"2",username:"B"},{id:"3",username:"C"}];return o.a.createElement("div",null,o.a.createElement("div",null,"You can click all buttons, each request has its own status."),o.a.createElement("ul",null,e.map(e=>o.a.createElement("li",{key:e.id,style:{marginTop:8}},o.a.createElement(u,e)))))}},"9kvl":function(e,n,t){"use strict";var a=t("FfOG");t.d(n,"a",(function(){return a["b"]})),t.d(n,"c",(function(){return a["c"]}));var r=t("bCY9");t.d(n,"b",(function(){return r["a"]}))},"AU+R":function(e,n,t){"use strict";t.r(n);t("DjyN");var a=t("NUBc"),r=t("wx14"),l=(t("Mwp2"),t("VXEj")),o=t("q1tI"),i=t.n(o),c=t("riab"),s=t("Op2u"),u=t("2PqJ"),m=new s["a"](u["a"]);n["default"]=Object(c["a"])(()=>{var e=m.data,n=m.loading,t=m.pagination,o=m.changePagination;return i.a.createElement("div",null,i.a.createElement(l["b"],{dataSource:e||[],loading:n,renderItem:e=>i.a.createElement(l["b"].Item,null,e.name," - ",e.email)}),i.a.createElement(a["a"],Object(r["a"])({},t,{onChange:(e,n)=>o({current:e,pageSize:n}),onShowSizeChange:(e,n)=>o({current:e,pageSize:n}),style:{marginTop:16,textAlign:"right"}})))})},FfOG:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"c",(function(){return c})),t.d(n,"b",(function(){return o}));var a=t("VTBJ"),r=t("YS25"),l={basename:"/"};window.routerBase&&(l.basename=window.routerBase);var o=Object({NODE_ENV:"production"}).__IS_SERVER?null:Object(r["b"])(l),i=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||(o=Object(r["b"])(l)),o},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l=Object(a["a"])(Object(a["a"])({},l),e)}},Jqcq:function(e,n,t){"use strict";t.r(n);var a=t("wx14"),r=t("q1tI"),l=t.n(r),o=(t("B2uJ"),t("+su7"),t("qOys")),i=t.n(o),c=t("5Yjd"),s=t.n(c),u=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("7RaP")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),m=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("VSD4")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),d=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("szVp")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),p=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("xGZ8")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),g=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("erZ4")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),h=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("ls1T")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),f=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("RJxA")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),E=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("imjU")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),v=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("aTMo")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),b=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("96It")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),y=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("AU+R")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),S=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("qng/")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),w=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("QndZ")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),x=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("rOkl")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)})),k=l.a.memo((function(){var e=t("TqRt"),n=e(t("q1tI")),a=e(t("L3Xe")),r=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(r)}));n["default"]=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h1",{id:"mobx-asnyc-state"},l.a.createElement("a",{"aria-hidden":"true",href:"#mobx-asnyc-state"},l.a.createElement("span",{className:"icon icon-link"})),"mobx-asnyc-state"),l.a.createElement("p",null,"Mobx \u5f02\u6b65\u51fd\u6570\u7684\u72b6\u6001\u7ba1\u7406\uff0c\u81ea\u52a8\u89c2\u5bdf ",l.a.createElement("code",null,"loading")," ",l.a.createElement("code",null,"data")," ",l.a.createElement("code",null,"error")," \u6570\u636e\u3002"),l.a.createElement("p",null,l.a.createElement("strong",null,"\u6838\u5fc3\u7279\u6027")),l.a.createElement("ul",null,l.a.createElement("li",null,"\u81ea\u52a8\u8bf7\u6c42"),l.a.createElement("li",null,"\u624b\u52a8\u8bf7\u6c42"),l.a.createElement("li",null,"\u7f13\u5b58 & \u9884\u52a0\u8f7d"),l.a.createElement("li",null,"\u5c4f\u5e55\u805a\u7126\u91cd\u65b0\u8bf7\u6c42"),l.a.createElement("li",null,"\u8f6e\u8be2"),l.a.createElement("li",null,"\u9632\u6296"),l.a.createElement("li",null,"\u8282\u6d41"),l.a.createElement("li",null,"\u7a81\u53d8"),l.a.createElement("li",null,"Loading Delay"),l.a.createElement("li",null,"\u5e76\u884c\u8bf7\u6c42"),l.a.createElement("li",null,"\u5206\u9875"),l.a.createElement("li",null,"\u52a0\u8f7d\u66f4\u591a"),l.a.createElement("li",null,"...")),l.a.createElement("h2",{id:"\ufe0f-\u6ce8\u610f\u4e8b\u9879"},l.a.createElement("a",{"aria-hidden":"true",href:"#\ufe0f-\u6ce8\u610f\u4e8b\u9879"},l.a.createElement("span",{className:"icon icon-link"})),"\u26a0\ufe0f \u6ce8\u610f\u4e8b\u9879"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u89c2\u5bdf\u6570\u636e\u65f6\uff0c\u9700\u5728\u5916\u5c42\u5305\u88f9 ",l.a.createElement("code",null,"observer"),"\uff0c\u5426\u5219\u65e0\u6cd5\u66f4\u65b0\u7ec4\u4ef6\u3002"),l.a.createElement("li",null,l.a.createElement("code",null,"import 'mobx-react-lite/batchingForReactDom'")," \u4e3a ",l.a.createElement("code",null,"observer")," \u914d\u7f6e\u89c2\u5bdf\u8005\u6279\u5904\u7406\uff0c\u4ec5\u9700\u5728\u9879\u76ee\u5165\u53e3\u5904\u5f15\u5165\u4e00\u6b21\u5373\u53ef\uff0c\u5426\u5219\u4f1a\u6709\u5982\u4e0b\u8b66\u544a\uff1a")),l.a.createElement(i.a,{code:"[MobX] You haven't configured observer batching which might result in unexpected behavior in some cases. See more at https://github.com/mobxjs/mobx-react-lite/#observer-batching\n",lang:"unknown"}),l.a.createElement("blockquote",null,l.a.createElement("p",null,"\u53c2\u8003\uff1a",l.a.createElement("a",{href:"https://stackoverflow.com/questions/61654633/mobx-react-console-warning-related-observer",target:"_blank",rel:"noopener noreferrer"},"https://stackoverflow.com/questions/61654633/mobx-react-console-warning-related-observer",l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}))))),l.a.createElement("h2",{id:"\u4ee3\u7801\u6f14\u793a"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u4ee3\u7801\u6f14\u793a"},l.a.createElement("span",{className:"icon icon-link"})),"\u4ee3\u7801\u6f14\u793a"),l.a.createElement("h3",{id:"\u9ed8\u8ba4\u8bf7\u6c42"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u9ed8\u8ba4\u8bf7\u6c42"},l.a.createElement("span",{className:"icon icon-link"})),"\u9ed8\u8ba4\u8bf7\u6c42")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import 'mobx-react-lite/batchingForReactDom';\nimport React from 'react';\nimport { observer } from \"mobx-react-lite\";\nimport AsyncState from \"mobx-async-state\";\n\nimport Mock from 'mockjs';\n\nfunction getUsername(): Promise<string> {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock('@name'));\n    }, 1000);\n  });\n}\n\nconst getUsernameState = new AsyncState(getUsername);\n\nexport default observer(() => {\n  const { loading, error, data } = getUsernameState;\n\n  if (loading) {\n    return <div>loading...</div>\n  }\n  if (error) {\n    return <div>failed to load</div>\n  }\n  return <div>Username: {data}</div>\n})\n",jsx:"import 'mobx-react-lite/batchingForReactDom';\nimport React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport AsyncState from 'mobx-async-state';\nimport Mock from 'mockjs';\n\nfunction getUsername() {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock('@name'));\n    }, 1000);\n  });\n}\n\nconst getUsernameState = new AsyncState(getUsername);\nexport default observer(() => {\n  const { loading, error, data } = getUsernameState;\n\n  if (loading) {\n    return <div>loading...</div>;\n  }\n\n  if (error) {\n    return <div>failed to load</div>;\n  }\n\n  return <div>Username: {data}</div>;\n});\n"}},{path:"/_demos/default",title:"\u9ed8\u8ba4\u8bf7\u6c42",desc:'<div class="markdown"><p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c <code>AsyncState</code> \u63a5\u6536\u4e86\u4e00\u4e2a\u5f02\u6b65\u51fd\u6570 <code>getUsername</code> \uff0c\u5728\u7ec4\u4ef6\u521d\u6b21\u52a0\u8f7d\u65f6\uff0c \u81ea\u52a8\u89e6\u53d1\u8be5\u51fd\u6570\u6267\u884c\u3002\u540c\u65f6 <code>AsyncState</code> \u4f1a\u81ea\u52a8\u7ba1\u7406\u5f02\u6b65\u8bf7\u6c42\u7684 <code>loading</code> , <code>data</code> , <code>error</code> \u7b49\u72b6\u6001\u3002</p></div>',dependencies:{"mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{}}),l.a.createElement(u,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u624b\u52a8\u89e6\u53d1"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u624b\u52a8\u89e6\u53d1"},l.a.createElement("span",{className:"icon icon-link"})),"\u624b\u52a8\u89e6\u53d1")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import 'mobx-react-lite/batchingForReactDom';\nimport React, { useState, useCallback } from 'react';\nimport { observer } from \"mobx-react-lite\";\nimport { Button, Input, message } from 'antd';\nimport AsyncState from \"mobx-async-state\";\n\nfunction changeUsername(username: string): Promise<{ success: boolean }> {\n  console.log(username);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve({ success: true });\n    }, 1000);\n  });\n}\n\nconst changeUsernameState = new AsyncState(changeUsername, {\n  autoRun: false\n});\n\nexport default observer(() => {\n  const [state, setState] = useState('');\n  const { run, loading } = changeUsernameState;\n\n  const handleClick = useCallback((val) => {\n    run(val).then((result) => {\n      if (result.success) {\n        setState('');\n        message.success(`The username was changed to \"${changeUsernameState.params[0]}\" !`);\n      }\n    });\n  }, []);\n\n  return (\n    <div>\n      <Input\n        onChange={e => setState(e.target.value)}\n        value={state}\n        placeholder=\"Please enter username\"\n        style={{ width: 240, marginRight: 16 }}\n      />\n      <Button onClick={() => handleClick(state)} loading={loading}>\n        Edit\n      </Button>\n    </div>\n  );\n});\n\n",jsx:"import 'mobx-react-lite/batchingForReactDom';\nimport React, { useState, useCallback } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Button, Input, message } from 'antd';\nimport AsyncState from 'mobx-async-state';\n\nfunction changeUsername(username) {\n  console.log(username);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve({\n        success: true,\n      });\n    }, 1000);\n  });\n}\n\nconst changeUsernameState = new AsyncState(changeUsername, {\n  autoRun: false,\n});\nexport default observer(() => {\n  const [state, setState] = useState('');\n  const { run, loading } = changeUsernameState;\n  const handleClick = useCallback(val => {\n    run(val).then(result => {\n      if (result.success) {\n        setState('');\n        message.success(`The username was changed to \"${changeUsernameState.params[0]}\" !`);\n      }\n    });\n  }, []);\n  return (\n    <div>\n      <Input\n        onChange={e => setState(e.target.value)}\n        value={state}\n        placeholder=\"Please enter username\"\n        style={{\n          width: 240,\n          marginRight: 16,\n        }}\n      />\n      <Button onClick={() => handleClick(state)} loading={loading}>\n        Edit\n      </Button>\n    </div>\n  );\n});\n"}},{path:"/_demos/auto-run",title:"\u624b\u52a8\u89e6\u53d1",desc:'<div class="markdown"><p>\u901a\u8fc7\u8bbe\u7f6e <code>options.autoRun = false</code> , \u5219\u9700\u8981\u624b\u52a8\u8c03\u7528 <code>run</code> \u65f6\u624d\u4f1a\u89e6\u53d1\u6267\u884c\u5f02\u6b65\u51fd\u6570\u3002</p>\n<p>\u7531\u4e8e <code>params</code> \u975e\u89c2\u5bdf\u6570\u636e\uff0c\u6240\u4ee5\u4e0d\u8981\u89e3\u6784\u51fa\u6765\u4f7f\u7528\u3002</p></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0"},files:{}}),l.a.createElement(m,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u7f13\u5b58--\u9884\u52a0\u8f7d"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u7f13\u5b58--\u9884\u52a0\u8f7d"},l.a.createElement("span",{className:"icon icon-link"})),"\u7f13\u5b58 & \u9884\u52a0\u8f7d")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React, { useState } from 'react';\nimport { Button, Spin } from 'antd';\nimport { observer } from \"mobx-react-lite\";\nimport AsyncState from \"mobx-async-state\";\n\nimport Mock from 'mockjs';\n\nfunction getArticle(): Promise<{ data: string, time: number }> {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve({\n        data: Mock.mock('@paragraph'),\n        time: new Date().getTime()\n      })\n    }, 1000)\n  });\n}\n\nconst getArticleState = new AsyncState(getArticle, {\n  autoRun: false,\n  cacheKey: 'article'\n});\n\nexport default observer(() => {\n  const [visible, setVisible] = useState(false);\n  const { run } = getArticleState;\n\n  return (\n    <div>\n      <p>When the mouse hovers over the button, the article data is preloaded.</p>\n      <p>\n        <Button onMouseEnter={() => run()} onClick={() => setVisible(b => !b)}>show/hidden</Button>\n      </p>\n      {visible && <Article />}\n    </div>\n  )\n});\n\nconst Article = observer(() => {\n  const { data, loading } = getArticleState;\n\n  return (\n    <Spin spinning={!data && loading}>\n      <p>Latest request time: {data?.time}</p>\n      <p>{data?.data}</p>\n    </Spin>\n  );\n});\n",jsx:"import React, { useState } from 'react';\nimport { Button, Spin } from 'antd';\nimport { observer } from 'mobx-react-lite';\nimport AsyncState from 'mobx-async-state';\nimport Mock from 'mockjs';\n\nfunction getArticle() {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve({\n        data: Mock.mock('@paragraph'),\n        time: new Date().getTime(),\n      });\n    }, 1000);\n  });\n}\n\nconst getArticleState = new AsyncState(getArticle, {\n  autoRun: false,\n  cacheKey: 'article',\n});\nexport default observer(() => {\n  const [visible, setVisible] = useState(false);\n  const { run } = getArticleState;\n  return (\n    <div>\n      <p>When the mouse hovers over the button, the article data is preloaded.</p>\n      <p>\n        <Button onMouseEnter={() => run()} onClick={() => setVisible(b => !b)}>\n          show/hidden\n        </Button>\n      </p>\n      {visible && <Article />}\n    </div>\n  );\n});\nconst Article = observer(() => {\n  const { data, loading } = getArticleState;\n  return (\n    <Spin spinning={!data && loading}>\n      <p>Latest request time: {data?.time}</p>\n      <p>{data?.data}</p>\n    </Spin>\n  );\n});\n"}},{path:"/_demos/preload",title:"\u7f13\u5b58 & \u9884\u52a0\u8f7d",desc:'<div class="markdown"><p>\u5982\u679c\u8bbe\u7f6e\u4e86 <code>options.cacheKey</code> \uff0c <code>AsyncState</code> \u4f1a\u5c06\u5f53\u524d\u8bf7\u6c42\u7ed3\u675f\u6570\u636e\u7f13\u5b58\u8d77\u6765\u3002\u4e0b\u6b21\u7ec4\u4ef6\u521d\u59cb\u5316\u65f6\uff0c\u5982\u679c\u6709\u7f13\u5b58\u6570\u636e\uff0c\u6211\u4eec\u4f1a\u4f18\u5148\u8fd4\u56de\u7f13\u5b58\u6570\u636e\uff0c\u7136\u540e\u5728\u80cc\u540e\u53d1\u9001\u65b0\u8bf7\u6c42\u3002</p>\n<p>\u540c\u4e00\u4e2a <code>cacheKey</code> \u7684\u8bf7\u6c42\uff0c\u662f\u5168\u5c40\u5171\u4eab\u7684\uff0c\u4e5f\u5c31\u662f\u4f60\u53ef\u4ee5\u63d0\u524d\u52a0\u8f7d\u6570\u636e\u3002\u5229\u7528\u8be5\u7279\u6027\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\u9884\u52a0\u8f7d\u3002</p></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{}}),l.a.createElement(d,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u5c4f\u5e55\u805a\u7126\u91cd\u65b0\u8bf7\u6c42"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u5c4f\u5e55\u805a\u7126\u91cd\u65b0\u8bf7\u6c42"},l.a.createElement("span",{className:"icon icon-link"})),"\u5c4f\u5e55\u805a\u7126\u91cd\u65b0\u8bf7\u6c42")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React from 'react';\nimport { observer } from \"mobx-react-lite\";\nimport { Spin } from 'antd';\nimport AsyncState from \"mobx-async-state\";\n\nimport Mock from 'mockjs';\n\nfunction getUsername(): Promise<string> {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock('@name'));\n    }, 1000);\n  });\n}\n\nconst getUsernameState = new AsyncState(getUsername, {\n  refreshOnWindowFocus: true\n});\n\nexport default observer(() => {\n  const { data, loading } = getUsernameState;\n\n  return (\n    <div>\n      <p>You can try to click elsewhere and click back to try. (Or hide the page and show it again)</p>\n      <Spin spinning={loading}>\n        <div>Username: {data}</div>\n      </Spin>\n    </div>\n  )\n});\n",jsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Spin } from 'antd';\nimport AsyncState from 'mobx-async-state';\nimport Mock from 'mockjs';\n\nfunction getUsername() {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock('@name'));\n    }, 1000);\n  });\n}\n\nconst getUsernameState = new AsyncState(getUsername, {\n  refreshOnWindowFocus: true,\n});\nexport default observer(() => {\n  const { data, loading } = getUsernameState;\n  return (\n    <div>\n      <p>\n        You can try to click elsewhere and click back to try. (Or hide the page and show it again)\n      </p>\n      <Spin spinning={loading}>\n        <div>Username: {data}</div>\n      </Spin>\n    </div>\n  );\n});\n"}},{path:"/_demos/refresh-on-window-focus",title:"\u5c4f\u5e55\u805a\u7126\u91cd\u65b0\u8bf7\u6c42",desc:'<div class="markdown"><p>\u5982\u679c\u4f60\u8bbe\u7f6e\u4e86 <code>options.refreshOnWindowFocus = true</code> \uff0c\u5219\u5728\u6d4f\u89c8\u5668\u7a97\u53e3 <code>refocus</code> \u548c <code>revisible</code> \u65f6\uff0c\u4f1a\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e <code>options.focusTimespan</code> \u6765\u8bbe\u7f6e\u8bf7\u6c42\u95f4\u9694\uff0c\u9ed8\u8ba4\u4e3a <code>5000ms</code> \u3002</p></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{}}),l.a.createElement(p,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u8f6e\u8be2"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u8f6e\u8be2"},l.a.createElement("span",{className:"icon icon-link"})),"\u8f6e\u8be2")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React from 'react';\nimport { observer } from \"mobx-react-lite\";\nimport { Button, Spin } from 'antd';\nimport AsyncState from \"mobx-async-state\";\n\nimport Mock from 'mockjs';\n\nfunction getUsername(): Promise<string> {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock('@name'));\n    }, 1000);\n  });\n}\n\nconst getUsernameState = new AsyncState(getUsername, {\n  pollingInterval: 1000,\n  pollingWhenHidden: false\n});\n\nexport default observer(() => {\n  const { loading, data, cancel, run } = getUsernameState;\n\n  return (\n    <>\n      <Spin spinning={loading}>\n        <p>Username: {data}</p>\n      </Spin>\n      <Button.Group>\n        <Button onClick={run}>start</Button>\n        <Button onClick={cancel}>stop</Button>\n      </Button.Group>\n    </>\n  )\n});\n",jsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Button, Spin } from 'antd';\nimport AsyncState from 'mobx-async-state';\nimport Mock from 'mockjs';\n\nfunction getUsername() {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock('@name'));\n    }, 1000);\n  });\n}\n\nconst getUsernameState = new AsyncState(getUsername, {\n  pollingInterval: 1000,\n  pollingWhenHidden: false,\n});\nexport default observer(() => {\n  const { loading, data, cancel, run } = getUsernameState;\n  return (\n    <>\n      <Spin spinning={loading}>\n        <p>Username: {data}</p>\n      </Spin>\n      <Button.Group>\n        <Button onClick={run}>start</Button>\n        <Button onClick={cancel}>stop</Button>\n      </Button.Group>\n    </>\n  );\n});\n"}},{path:"/_demos/polling-interval",title:"\u8f6e\u8be2",desc:'<div class="markdown"><p>\u901a\u8fc7\u8bbe\u7f6e <code>options.pollingInterval</code> \uff0c\u8fdb\u5165\u8f6e\u8be2\u6a21\u5f0f\uff0c\u5b9a\u65f6\u89e6\u53d1\u51fd\u6570\u6267\u884c\u3002</p>\n<ul>\n<li>\u901a\u8fc7\u8bbe\u7f6e <code>options.pollingWhenHidden=false</code> \uff0c\u5728\u5c4f\u5e55\u4e0d\u53ef\u89c1\u65f6\uff0c\u6682\u65f6\u6682\u505c\u5b9a\u65f6\u4efb\u52a1\u3002</li>\n<li>\u901a\u8fc7 <code>run</code> / <code>cancel</code> \u6765 \u5f00\u542f/\u505c\u6b62 \u8f6e\u8be2\u3002</li>\n<li>\u5728 <code>options.autoRun=false</code> \u65f6\uff0c\u9700\u8981\u7b2c\u4e00\u6b21\u6267\u884c <code>run</code> \u540e\uff0c\u624d\u5f00\u59cb\u8f6e\u8be2\u3002</li>\n</ul></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{}}),l.a.createElement(g,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u9632\u6296"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u9632\u6296"},l.a.createElement("span",{className:"icon icon-link"})),"\u9632\u6296")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Select } from 'antd';\nimport AsyncState from \"mobx-async-state\";\n\nimport Mock from 'mockjs';\n\nfunction getEmail(search: string): Promise<string[]> {\n  console.log(search);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock({ 'data|5': ['@email'] }).data);\n    }, 300);\n  });\n}\n\nconst { Option } = Select;\n\nconst getEmailState = new AsyncState(getEmail, {\n  debounceInterval: 500,\n  autoRun: false\n});\n\nexport default observer(() => {\n  const { data = [], run, loading, cancel } = getEmailState;\n\n  return (\n    <div>\n      <p>Enter quickly to see the effect</p>\n      <Select\n        showSearch\n        placeholder=\"Select Emails\"\n        filterOption={false}\n        onSearch={run}\n        onBlur={cancel}\n        loading={loading}\n        style={{ width: 300 }}\n      >\n        {data.map(i => <Option key={i} value={i}>{i}</Option>)}\n      </Select>\n    </div>\n  );\n});\n",jsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Select } from 'antd';\nimport AsyncState from 'mobx-async-state';\nimport Mock from 'mockjs';\n\nfunction getEmail(search) {\n  console.log(search);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(\n        Mock.mock({\n          'data|5': ['@email'],\n        }).data,\n      );\n    }, 300);\n  });\n}\n\nconst { Option } = Select;\nconst getEmailState = new AsyncState(getEmail, {\n  debounceInterval: 500,\n  autoRun: false,\n});\nexport default observer(() => {\n  const { data = [], run, loading, cancel } = getEmailState;\n  return (\n    <div>\n      <p>Enter quickly to see the effect</p>\n      <Select\n        showSearch\n        placeholder=\"Select Emails\"\n        filterOption={false}\n        onSearch={run}\n        onBlur={cancel}\n        loading={loading}\n        style={{\n          width: 300,\n        }}\n      >\n        {data.map(i => (\n          <Option key={i} value={i}>\n            {i}\n          </Option>\n        ))}\n      </Select>\n    </div>\n  );\n});\n"}},{path:"/_demos/debounce-interval",title:"\u9632\u6296",desc:'<div class="markdown"><p>\u901a\u8fc7\u8bbe\u7f6e <code>options.debounceInterval</code> \uff0c\u5219\u8fdb\u5165\u9632\u6296\u6a21\u5f0f\u3002\u6b64\u65f6\u5982\u679c\u9891\u7e41\u89e6\u53d1 <code>run</code> \uff0c\u5219\u4f1a\u4ee5\u9632\u6296\u7b56\u7565\u8fdb\u884c\u8bf7\u6c42\u3002</p></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{}}),l.a.createElement(h,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u8282\u6d41"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u8282\u6d41"},l.a.createElement("span",{className:"icon icon-link"})),"\u8282\u6d41")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Select } from 'antd';\nimport AsyncState from \"mobx-async-state\";\n\nimport Mock from 'mockjs';\n\nfunction getEmail(search: string): Promise<string[]> {\n  console.log(search);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock({ 'data|5': ['@email'] }).data);\n    }, 300);\n  });\n}\n\nconst { Option } = Select;\n\nconst getEmailState = new AsyncState(getEmail, {\n  throttleInterval: 1000,\n  autoRun: false\n});\n\nexport default observer(() => {\n  const { data = [], run, cancel, loading } = getEmailState;\n\n  return (\n    <div>\n      <p>Enter quickly to see the effect</p>\n      <Select\n        showSearch\n        placeholder=\"Select Emails\"\n        filterOption={false}\n        onSearch={run}\n        onBlur={cancel}\n        loading={loading}\n        style={{ width: 300 }}\n      >\n        {data.map(i => <Option key={i} value={i}>{i}</Option>)}\n      </Select>\n    </div>\n  );\n});\n",jsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Select } from 'antd';\nimport AsyncState from 'mobx-async-state';\nimport Mock from 'mockjs';\n\nfunction getEmail(search) {\n  console.log(search);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(\n        Mock.mock({\n          'data|5': ['@email'],\n        }).data,\n      );\n    }, 300);\n  });\n}\n\nconst { Option } = Select;\nconst getEmailState = new AsyncState(getEmail, {\n  throttleInterval: 1000,\n  autoRun: false,\n});\nexport default observer(() => {\n  const { data = [], run, cancel, loading } = getEmailState;\n  return (\n    <div>\n      <p>Enter quickly to see the effect</p>\n      <Select\n        showSearch\n        placeholder=\"Select Emails\"\n        filterOption={false}\n        onSearch={run}\n        onBlur={cancel}\n        loading={loading}\n        style={{\n          width: 300,\n        }}\n      >\n        {data.map(i => (\n          <Option key={i} value={i}>\n            {i}\n          </Option>\n        ))}\n      </Select>\n    </div>\n  );\n});\n"}},{path:"/_demos/throttle-interval",title:"\u8282\u6d41",desc:'<div class="markdown"><p>\u901a\u8fc7\u8bbe\u7f6e <code>options.throttleInterval</code> \uff0c\u5219\u8fdb\u5165\u8282\u6d41\u6a21\u5f0f\u3002\u6b64\u65f6\u5982\u679c\u9891\u7e41\u89e6\u53d1 <code>run</code> \uff0c\u5219\u4f1a\u4ee5\u8282\u6d41\u7b56\u7565\u8fdb\u884c\u8bf7\u6c42\u3002</p></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{}}),l.a.createElement(f,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u7a81\u53d8"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u7a81\u53d8"},l.a.createElement("span",{className:"icon icon-link"})),"\u7a81\u53d8")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React, { useState, useCallback, useEffect } from 'react';\nimport { observer } from \"mobx-react-lite\";\nimport { Button, Input, message } from 'antd';\nimport AsyncState from \"mobx-async-state\";\n\nimport Mock from 'mockjs';\n\nfunction getUsername(): Promise<string> {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock('@name'));\n    }, 1000);\n  });\n}\n\nfunction changeUsername(username: string): Promise<{ success: boolean }> {\n  console.log(username);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve({ success: true });\n    }, 1000);\n  });\n}\n\nconst getUsernameState = new AsyncState(getUsername, {\n  autoRun: false\n});\nconst changeUsernameState = new AsyncState(changeUsername, {\n  autoRun: false\n});\n\nexport default observer(() => {\n  const [state, setState] = useState('');\n\n  useEffect(() => {\n    getUsernameState.run().then(result => {\n      setState(result);\n    });\n  }, []);\n\n  const handleChangeUsername = useCallback((name) => {\n    changeUsernameState.run(name).then((result) => {\n      if (result.success) {\n        getUsernameState.mutate(changeUsernameState.params[0]);\n        message.success(`The username was changed to \"${changeUsernameState.params[0]}\" !`);\n      }\n    });\n  }, []);\n\n  return (\n    <div>\n      <p>usrename: {getUsernameState.data}</p>\n      <Input\n        onChange={e => setState(e.target.value)}\n        value={state}\n        placeholder=\"Please enter username\"\n        style={{ width: 240, marginRight: 16 }}\n      />\n      <Button onClick={() => handleChangeUsername(state)} loading={changeUsernameState.loading}>\n        Edit\n      </Button>\n    </div>\n  );\n});\n",jsx:"import React, { useState, useCallback, useEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Button, Input, message } from 'antd';\nimport AsyncState from 'mobx-async-state';\nimport Mock from 'mockjs';\n\nfunction getUsername() {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(Mock.mock('@name'));\n    }, 1000);\n  });\n}\n\nfunction changeUsername(username) {\n  console.log(username);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve({\n        success: true,\n      });\n    }, 1000);\n  });\n}\n\nconst getUsernameState = new AsyncState(getUsername, {\n  autoRun: false,\n});\nconst changeUsernameState = new AsyncState(changeUsername, {\n  autoRun: false,\n});\nexport default observer(() => {\n  const [state, setState] = useState('');\n  useEffect(() => {\n    getUsernameState.run().then(result => {\n      setState(result);\n    });\n  }, []);\n  const handleChangeUsername = useCallback(name => {\n    changeUsernameState.run(name).then(result => {\n      if (result.success) {\n        getUsernameState.mutate(changeUsernameState.params[0]);\n        message.success(`The username was changed to \"${changeUsernameState.params[0]}\" !`);\n      }\n    });\n  }, []);\n  return (\n    <div>\n      <p>usrename: {getUsernameState.data}</p>\n      <Input\n        onChange={e => setState(e.target.value)}\n        value={state}\n        placeholder=\"Please enter username\"\n        style={{\n          width: 240,\n          marginRight: 16,\n        }}\n      />\n      <Button onClick={() => handleChangeUsername(state)} loading={changeUsernameState.loading}>\n        Edit\n      </Button>\n    </div>\n  );\n});\n"}},{path:"/_demos/mutate",title:"\u7a81\u53d8",desc:'<div class="markdown"><p>\u4f60\u53ef\u4ee5\u901a\u8fc7 <code>mutate</code> \uff0c\u76f4\u63a5\u4fee\u6539 <code>data</code> \u3002 <code>mutate</code> \u51fd\u6570\u53c2\u6570\u53ef\u4ee5\u4e3a <code>newData</code> \u6216 <code>(oldData)=> newData</code> \u3002</p></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{}}),l.a.createElement(E,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"loading-delay"},l.a.createElement("a",{"aria-hidden":"true",href:"#loading-delay"},l.a.createElement("span",{className:"icon icon-link"})),"Loading Delay")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React from 'react';\nimport { observer } from \"mobx-react-lite\";\nimport { Spin, Button } from 'antd';\nimport AsyncState from \"mobx-async-state\";\n\nfunction getCurrentTime(): Promise<number> {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(new Date().getTime())\n    }, 100)\n  });\n}\n\nconst getCurrentTimeState = new AsyncState(getCurrentTime);\nconst withLoadingDelayState = new AsyncState(getCurrentTime, {\n  loadingDelay: 200\n});\n\nexport default observer(() => {\n  const trigger = () => {\n    getCurrentTimeState.run();\n    withLoadingDelayState.run();\n  }\n\n  return (\n    <div>\n      <p>loadingDelay can set delay loading, which can effectively prevent loading from flickering.</p>\n      <Button onClick={trigger}>\n        run\n      </Button>\n\n      <div style={{ margin: '24px 0', width: 300 }}>\n        <Spin spinning={getCurrentTimeState.loading}>\n          Double Count: {getCurrentTimeState.data}\n        </Spin>\n      </div>\n      <div>\n        <Spin spinning={withLoadingDelayState.loading}>\n          Double Count: {withLoadingDelayState.data}\n        </Spin>\n      </div>\n    </div>\n  );\n});\n",jsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Spin, Button } from 'antd';\nimport AsyncState from 'mobx-async-state';\n\nfunction getCurrentTime() {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(new Date().getTime());\n    }, 100);\n  });\n}\n\nconst getCurrentTimeState = new AsyncState(getCurrentTime);\nconst withLoadingDelayState = new AsyncState(getCurrentTime, {\n  loadingDelay: 200,\n});\nexport default observer(() => {\n  const trigger = () => {\n    getCurrentTimeState.run();\n    withLoadingDelayState.run();\n  };\n\n  return (\n    <div>\n      <p>\n        loadingDelay can set delay loading, which can effectively prevent loading from flickering.\n      </p>\n      <Button onClick={trigger}>run</Button>\n\n      <div\n        style={{\n          margin: '24px 0',\n          width: 300,\n        }}\n      >\n        <Spin spinning={getCurrentTimeState.loading}>Double Count: {getCurrentTimeState.data}</Spin>\n      </div>\n      <div>\n        <Spin spinning={withLoadingDelayState.loading}>\n          Double Count: {withLoadingDelayState.data}\n        </Spin>\n      </div>\n    </div>\n  );\n});\n"}},{path:"/_demos/loading-delay",title:"Loading Delay",desc:'<div class="markdown"><p>\u901a\u8fc7\u8bbe\u7f6e <code>options.loadingDelay</code> \uff0c\u53ef\u4ee5\u5ef6\u8fdf <code>loading</code> \u53d8\u6210 <code>true</code> \u7684\u65f6\u95f4\uff0c\u6709\u6548\u9632\u6b62\u95ea\u70c1\u3002</p></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0"},files:{}}),l.a.createElement(v,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u5e76\u884c\u8bf7\u6c42"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u5e76\u884c\u8bf7\u6c42"},l.a.createElement("span",{className:"icon icon-link"})),"\u5e76\u884c\u8bf7\u6c42")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React, { useCallback, useMemo } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { Button, message } from 'antd';\nimport AsyncState from \"mobx-async-state\";\n\nfunction deleteUser(userId: string): Promise<{ success: boolean }> {\n  console.log(userId);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve({ success: true });\n    }, 1000);\n  });\n}\n\nconst DeleteButton = observer(({ id, username }: { id: string, username: string }) => {\n  const { run, loading } = useMemo(() => new AsyncState(deleteUser, { autoRun: false }), []);\n\n  const handleDelete = useCallback((sid: string) => {\n    run(sid).then((result) => {\n      if (result.success) {\n        message.success(`Delete user ${username}`);\n      }\n    });\n  }, []);\n\n  return <Button loading={loading} onClick={() => { handleDelete(id) }}>delete {username}</Button>\n});\n\nexport default () => {\n  const users = [{ id: '1', username: 'A' }, { id: '2', username: 'B' }, { id: '3', username: 'C' }];\n\n  return (\n    <div>\n      <div>You can click all buttons, each request has its own status.</div>\n      <ul>\n        {users.map((user => (\n          <li key={user.id} style={{ marginTop: 8 }}>\n            <DeleteButton {...user} />\n          </li>\n        )))}\n      </ul>\n    </div>\n  );\n};\n",jsx:"import React, { useCallback, useMemo } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Button, message } from 'antd';\nimport AsyncState from 'mobx-async-state';\n\nfunction deleteUser(userId) {\n  console.log(userId);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve({\n        success: true,\n      });\n    }, 1000);\n  });\n}\n\nconst DeleteButton = observer(({ id, username }) => {\n  const { run, loading } = useMemo(\n    () =>\n      new AsyncState(deleteUser, {\n        autoRun: false,\n      }),\n    [],\n  );\n  const handleDelete = useCallback(sid => {\n    run(sid).then(result => {\n      if (result.success) {\n        message.success(`Delete user ${username}`);\n      }\n    });\n  }, []);\n  return (\n    <Button\n      loading={loading}\n      onClick={() => {\n        handleDelete(id);\n      }}\n    >\n      delete {username}\n    </Button>\n  );\n});\nexport default () => {\n  const users = [\n    {\n      id: '1',\n      username: 'A',\n    },\n    {\n      id: '2',\n      username: 'B',\n    },\n    {\n      id: '3',\n      username: 'C',\n    },\n  ];\n  return (\n    <div>\n      <div>You can click all buttons, each request has its own status.</div>\n      <ul>\n        {users.map(user => (\n          <li\n            key={user.id}\n            style={{\n              marginTop: 8,\n            }}\n          >\n            <DeleteButton {...user} />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n"}},{path:"/_demos/parallel",title:"\u5e76\u884c\u8bf7\u6c42",desc:'<div class="markdown"><p>\u5c06\u6709\u8bf7\u6c42\u7684\u7ec4\u4ef6\u5355\u72ec\u5c01\u88c5\uff0c\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u90fd\u6709\u72ec\u7acb\u7684\u72b6\u6001\u3002</p></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7","mobx-async-state":"1.1.0"},files:{}}),l.a.createElement(b,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h2",{id:"api"},l.a.createElement("a",{"aria-hidden":"true",href:"#api"},l.a.createElement("span",{className:"icon icon-link"})),"API"),l.a.createElement(i.a,{code:"const {\n  data,\n  error,\n  loading,\n  params,\n  run,\n  cancel,\n  refresh,\n  mutate,\n  destroy\n} = new AsyncState(asyncFn, {\n  autoRun,\n  initialData,\n  defaultParams,\n  onSuccess,\n  onError,\n  cacheKey,\n  cacheTime,\n  loadingDelay,\n  pollingInterval,\n  pollingWhenHidden,\n  refreshOnWindowFocus,\n  focusTimespan,\n  debounceInterval,\n  throttleInterval,\n});\n",lang:"javascript"}),l.a.createElement("h3",{id:"result"},l.a.createElement("a",{"aria-hidden":"true",href:"#result"},l.a.createElement("span",{className:"icon icon-link"})),"Result"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u53c2\u6570"),l.a.createElement("th",null,"\u8bf4\u660e"),l.a.createElement("th",null,"\u7c7b\u578b"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"data"),l.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u9ed8\u8ba4\u4e3a ",l.a.createElement("code",null,"undefined"),"\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"any"))),l.a.createElement("tr",null,l.a.createElement("td",null,"error"),l.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570\u629b\u51fa\u7684\u5f02\u5e38\uff0c\u9ed8\u8ba4\u4e3a ",l.a.createElement("code",null,"undefined")),l.a.createElement("td",null,l.a.createElement("code",null,"any"))),l.a.createElement("tr",null,l.a.createElement("td",null,"loading"),l.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570\u6b63\u5728\u6267\u884c"),l.a.createElement("td",null,l.a.createElement("code",null,"boolean"))),l.a.createElement("tr",null,l.a.createElement("td",null,"params"),l.a.createElement("td",null,"\u6267\u884c\u5f02\u6b65\u51fd\u6570\u7684\u53c2\u6570\u6570\u7ec4\u3002\u6bd4\u5982\u4f60\u89e6\u53d1\u4e86 ",l.a.createElement("code",null,"run(1, 2, 3)"),"\uff0c\u5219 ",l.a.createElement("code",null,"params")," \u7b49\u4e8e ",l.a.createElement("code",null,"[1, 2, 3]"),"\u3002",l.a.createElement("strong",null,"\u8be5\u503c\u672a\u88ab\u89c2\u5bdf\uff0c\u53d8\u66f4\u540e\u4e0d\u4f1a\u89e6\u53d1\u7ec4\u4ef6\u66f4\u65b0\u3002")),l.a.createElement("td",null,l.a.createElement("code",null,"array"))),l.a.createElement("tr",null,l.a.createElement("td",null,"run"),l.a.createElement("td",null,"\u624b\u52a8\u89e6\u53d1\u5f02\u6b65\u51fd\u6570\u3002",l.a.createElement("code",null,"debounce")," \u6a21\u5f0f\u4e0e ",l.a.createElement("code",null,"throttle")," \u6a21\u5f0f\u8fd4\u56de\u503c\u4e3a ",l.a.createElement("code",null,"Promise<null>")),l.a.createElement("td",null,l.a.createElement("code",null,"(...args) => Promise"))),l.a.createElement("tr",null,l.a.createElement("td",null,"cancel"),l.a.createElement("td",null,"\u53d6\u6d88\u5f53\u524d\u8bf7\u6c42\u3002\u5982\u679c\u6709\u8f6e\u8be2\uff0c\u505c\u6b62\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"() => void"))),l.a.createElement("tr",null,l.a.createElement("td",null,"refresh"),l.a.createElement("td",null,"\u4f7f\u7528\u4e0a\u4e00\u6b21\u7684 ",l.a.createElement("code",null,"params")," \uff0c\u91cd\u65b0\u6267\u884c\u5f02\u6b65\u51fd\u6570\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"() => void"))),l.a.createElement("tr",null,l.a.createElement("td",null,"mutate"),l.a.createElement("td",null,"\u76f4\u63a5\u4fee\u6539 ",l.a.createElement("code",null,"data")),l.a.createElement("td",null,l.a.createElement("code",null,"(newData) => void")," / ",l.a.createElement("code",null,"((oldData) => newData) => void"))),l.a.createElement("tr",null,l.a.createElement("td",null,"destroy"),l.a.createElement("td",null,"\u53d6\u6d88\u5f53\u524d\u8bf7\u6c42\u53ca\u8ba2\u9605\uff08\u5982\u76d1\u542c\u89c6\u7a97\u7126\u70b9/\u663e\u793a\uff09\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"() => void"))))),l.a.createElement("h3",{id:"params"},l.a.createElement("a",{"aria-hidden":"true",href:"#params"},l.a.createElement("span",{className:"icon icon-link"})),"Params"),l.a.createElement("p",null,"\u6240\u6709\u914d\u7f6e\u9879\u90fd\u662f\u53ef\u9009\u7684\u3002"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u53c2\u6570"),l.a.createElement("th",null,"\u8bf4\u660e"),l.a.createElement("th",null,"\u7c7b\u578b"),l.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"autoRun"),l.a.createElement("td",null,"\u9ed8\u8ba4 ",l.a.createElement("code",null,"true"),"\u3002\u5373\u5728\u521d\u59cb\u5316\u65f6\u81ea\u52a8\u6267\u884c\u5f02\u6b65\u51fd\u6570\u3002\u5982\u679c\u4e3a ",l.a.createElement("code",null,"false"),"\uff0c\u5219\u9700\u8981\u624b\u52a8\u8c03\u7528 ",l.a.createElement("code",null,"run")," \u89e6\u53d1\u6267\u884c\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"boolean")),l.a.createElement("td",null,l.a.createElement("code",null,"true"))),l.a.createElement("tr",null,l.a.createElement("td",null,"initialData"),l.a.createElement("td",null,"\u9ed8\u8ba4\u7684 ",l.a.createElement("code",null,"data"),"\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"any")),l.a.createElement("td",null,"-")),l.a.createElement("tr",null,l.a.createElement("td",null,"defaultParams"),l.a.createElement("td",null,"\u5982\u679c ",l.a.createElement("code",null,"autoRun=true")," \u81ea\u52a8\u6267\u884c ",l.a.createElement("code",null,"run")," \u7684\u9ed8\u8ba4\u53c2\u6570\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"array")),l.a.createElement("td",null,"-")),l.a.createElement("tr",null,l.a.createElement("td",null,"formatResult"),l.a.createElement("td",null,"\u683c\u5f0f\u5316\u8bf7\u6c42\u7ed3\u679c"),l.a.createElement("td",null,l.a.createElement("code",null,"(data) => any")),l.a.createElement("td",null,"-")),l.a.createElement("tr",null,l.a.createElement("td",null,"onSuccess"),l.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570 ",l.a.createElement("code",null,"resolve")," \u65f6\u89e6\u53d1\uff0c\u53c2\u6570\u4e3a ",l.a.createElement("code",null,"data")," \u548c ",l.a.createElement("code",null,"params"),"\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"(data, params) => void")),l.a.createElement("td",null,"-")),l.a.createElement("tr",null,l.a.createElement("td",null,"onError"),l.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570\u62a5\u9519\u65f6\u89e6\u53d1\uff0c\u53c2\u6570\u4e3a ",l.a.createElement("code",null,"error")," \u548c ",l.a.createElement("code",null,"params")),l.a.createElement("td",null,l.a.createElement("code",null,"(error, parmams) => void")),l.a.createElement("td",null,"-")),l.a.createElement("tr",null,l.a.createElement("td",null,"cacheKey"),l.a.createElement("td",null,"\u7f13\u5b58\u7684\u952e\u503c\uff0c\u542f\u7528\u7f13\u5b58\u673a\u5236\u3002\u5f02\u6b65\u6210\u529f\u7ed3\u679c\uff0c\u5c06\u88ab\u7f13\u5b58\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"string")),l.a.createElement("td",null,"-")),l.a.createElement("tr",null,l.a.createElement("td",null,"cacheTime"),l.a.createElement("td",null,"\u7f13\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,l.a.createElement("code",null,"5*60*1000"))),l.a.createElement("tr",null,l.a.createElement("td",null,"loadingDelay"),l.a.createElement("td",null,"\u8bbe\u7f6e ",l.a.createElement("code",null,"loading")," \u5ef6\u8fdf\u65f6\u95f4\uff0c\u907f\u514d\u95ea\u70c1\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,"-")),l.a.createElement("tr",null,l.a.createElement("td",null,"pollingInterval"),l.a.createElement("td",null,"\u8f6e\u8be2\u95f4\u9694\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002\u8bbe\u7f6e\u540e\uff0c\u5c06\u8fdb\u5165\u8f6e\u8be2\u6a21\u5f0f\uff0c\u5b9a\u65f6\u89e6\u53d1 ",l.a.createElement("code",null,"run")),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,"-")),l.a.createElement("tr",null,l.a.createElement("td",null,"pollingWhenHidden"),l.a.createElement("td",null,"\u5728\u9875\u9762\u9690\u85cf\u65f6\uff0c\u662f\u5426\u7ee7\u7eed\u8f6e\u8be2\u3002\u9ed8\u8ba4\u4e3a ",l.a.createElement("code",null,"true"),"\uff0c\u5373\u4e0d\u4f1a\u505c\u6b62\u8f6e\u8be2",l.a.createElement("br",null),"\u5982\u679c\u8bbe\u7f6e\u4e3a ",l.a.createElement("code",null,"false"),"\uff0c\u5728\u9875\u9762\u9690\u85cf\u65f6\u4f1a\u6682\u65f6\u505c\u6b62\u8f6e\u8be2\uff0c\u9875\u9762\u91cd\u65b0\u663e\u793a\u65f6\u7ee7\u7eed\u4e0a\u6b21\u8f6e\u8be2"),l.a.createElement("td",null,l.a.createElement("code",null,"boolean")),l.a.createElement("td",null,"true")),l.a.createElement("tr",null,l.a.createElement("td",null,"refreshOnWindowFocus"),l.a.createElement("td",null,"\u5728\u5c4f\u5e55\u91cd\u65b0\u83b7\u53d6\u7126\u70b9\u6216\u91cd\u65b0\u663e\u793a\u65f6\uff0c\u662f\u5426\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002\u9ed8\u8ba4\u4e3a ",l.a.createElement("code",null,"false"),"\uff0c\u5373\u4e0d\u4f1a\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002",l.a.createElement("br",null),"\u5982\u679c\u8bbe\u7f6e\u4e3a ",l.a.createElement("code",null,"true"),"\uff0c\u5728\u5c4f\u5e55\u91cd\u65b0\u805a\u7126\u6216\u91cd\u65b0\u663e\u793a\u65f6\uff0c\u4f1a\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"boolean")),l.a.createElement("td",null,l.a.createElement("code",null,"false"))),l.a.createElement("tr",null,l.a.createElement("td",null,"focusTimespan"),l.a.createElement("td",null,"\u5c4f\u5e55\u91cd\u65b0\u805a\u7126\uff0c\u5982\u679c\u6bcf\u6b21\u90fd\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\uff0c\u4e0d\u662f\u5f88\u597d\uff0c\u6211\u4eec\u9700\u8981\u6709\u4e00\u4e2a\u65f6\u95f4\u95f4\u9694\uff0c\u5728\u5f53\u524d\u65f6\u95f4\u95f4\u9694\u5185\uff0c\u4e0d\u4f1a\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002\u9700\u8981\u914d\u7f6e ",l.a.createElement("code",null,"refreshOnWindowFocus")," \u4f7f\u7528\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,l.a.createElement("code",null,"5000"))),l.a.createElement("tr",null,l.a.createElement("td",null,"debounceInterval"),l.a.createElement("td",null,"\u9632\u6296\u95f4\u9694, \u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u8bbe\u7f6e\u540e\uff0c\u8bf7\u6c42\u8fdb\u5165\u9632\u6296\u6a21\u5f0f\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,"-")),l.a.createElement("tr",null,l.a.createElement("td",null,"throttleInterval"),l.a.createElement("td",null,"\u8282\u6d41\u95f4\u9694, \u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u8bbe\u7f6e\u540e\uff0c\u8bf7\u6c42\u8fdb\u5165\u8282\u6d41\u6a21\u5f0f\u3002"),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,"-")))),l.a.createElement("h2",{id:"\u6269\u5c55\u7528\u6cd5"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u6269\u5c55\u7528\u6cd5"},l.a.createElement("span",{className:"icon icon-link"})),"\u6269\u5c55\u7528\u6cd5"),l.a.createElement("p",null,"\u57fa\u4e8e\u57fa\u7840\u7684 ",l.a.createElement("code",null,"AsyncState"),"\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5c01\u88c5\uff0c\u5b9e\u73b0\u66f4\u9ad8\u7ea7\u7684\u5b9a\u5236\u9700\u6c42\u3002\u4e0b\u9762\u6f14\u793a ",l.a.createElement("code",null,"\u5206\u9875")," \u548c ",l.a.createElement("code",null,"\u52a0\u8f7d\u66f4\u591a")," \u4e24\u79cd\u573a\u666f\uff0c\u4f60\u53ef\u4ee5\u53c2\u8003\u4ee3\u7801\uff0c\u6839\u636e\u4e1a\u52a1\u5b9e\u73b0\u81ea\u5df1\u7684\u5c01\u88c5\u3002"),l.a.createElement("p",null,"\u8be5\u573a\u666f\u4ee5\u4e0b\u9762\u7684 ",l.a.createElement("code",null,"\u8bf7\u6c42\u53c2\u6570")," \u548c ",l.a.createElement("code",null,"\u54cd\u5e94\u6570\u636e")," \u683c\u5f0f\u4e3a\u793a\u4f8b"),l.a.createElement("p",null,"\u8bf7\u6c42\u53c2\u6570\uff1a"),l.a.createElement(i.a,{code:"{\n  page: {\n    pageNum: number,\n    pageSize: number\n  },\n  data: {\n    ...\n  }\n}\n",lang:"unknown"}),l.a.createElement("p",null,"\u54cd\u5e94\u6570\u636e\uff1a"),l.a.createElement(i.a,{code:"{\n  pageInfo: {\n    ...,\n    total: number\n  },\n  data: []\n}\n",lang:"unknown"}),l.a.createElement("h3",{id:"\u5206\u9875"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u5206\u9875"},l.a.createElement("span",{className:"icon icon-link"})),"\u5206\u9875"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u81ea\u52a8\u7ba1\u7406\u5206\u9875\u6761\u4ef6 ",l.a.createElement("code",null,"page")," \uff0c ",l.a.createElement("code",null,"page: ","{","pageNum: number, pageSize: number","}")," \u3002"),l.a.createElement("li",null,"\u5185\u90e8\u7f13\u5b58\u5f53\u524d\u67e5\u8be2\u6761\u4ef6 ",l.a.createElement("code",null,"data")," \uff0c\u5f53\u5206\u9875\u53d8\u5316\u540e\uff0c\u81ea\u52a8\u643a\u5e26\u5f53\u524d\u67e5\u8be2\u6761\u4ef6\u89e6\u53d1\u8bf7\u6c42\u3002"),l.a.createElement("li",null,l.a.createElement("code",null,"run")," \u65b9\u6cd5\u5982\u679c\u5e26\u6709\u53c2\u6570\uff0c\u8868\u793a\u4fee\u6539\u4e86\u67e5\u8be2\u6761\u4ef6\uff0c\u5c06\u4f1a\u91cd\u7f6e\u5f53\u524d\u9875\u7801\u4e3a ",l.a.createElement("code",null,"1"),"\uff0c\u5e76\u89e6\u53d1\u8bf7\u6c42\u3002"),l.a.createElement("li",null,l.a.createElement("code",null,"refresh")," \u81ea\u52a8\u5e26\u5165\u5f53\u524d\u53c2\u6570\u5e76\u89e6\u53d1\u8bf7\u6c42\u3002"),l.a.createElement("li",null,l.a.createElement("code",null,"changePagination")," \u4fee\u6539\u5206\u9875\uff0c\u5c06\u4f7f\u7528\u5f53\u524d\u67e5\u8be2\u6761\u4ef6\u8fdb\u884c\u8bf7\u6c42\u3002")),l.a.createElement("h4",{id:"paginationstate"},l.a.createElement("a",{"aria-hidden":"true",href:"#paginationstate"},l.a.createElement("span",{className:"icon icon-link"})),"PaginationState")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { List, Pagination } from 'antd';\n\nimport PaginationState from \"../store/PaginationState\";\nimport getUserList from \"../services/getUserList\";\n\nconst getUserListState = new PaginationState(getUserList);\n\nexport default observer(() => {\n  const { data, loading, pagination, changePagination } = getUserListState;\n\n  return (\n    <div>\n      <List\n        dataSource={data || []}\n        loading={loading}\n        renderItem={(item: any) => (\n          <List.Item>\n            {item.name} - {item.email}\n          </List.Item>\n        )}\n      />\n      <Pagination\n        {...pagination}\n        onChange={(current, pageSize) => changePagination({ current, pageSize })}\n        onShowSizeChange={(current, pageSize) => changePagination({ current, pageSize })}\n        style={{ marginTop: 16, textAlign: 'right' }}\n      />\n    </div>\n  );\n});\n",jsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { List, Pagination } from 'antd';\nimport PaginationState from '../store/PaginationState';\nimport getUserList from '../services/getUserList';\n\nconst getUserListState = new PaginationState(getUserList);\nexport default observer(() => {\n  const { data, loading, pagination, changePagination } = getUserListState;\n  return (\n    <div>\n      <List\n        dataSource={data || []}\n        loading={loading}\n        renderItem={item => (\n          <List.Item>\n            {item.name} - {item.email}\n          </List.Item>\n        )}\n      />\n      <Pagination\n        {...pagination}\n        onChange={(current, pageSize) =>\n          changePagination({\n            current,\n            pageSize,\n          })\n        }\n        onShowSizeChange={(current, pageSize) =>\n          changePagination({\n            current,\n            pageSize,\n          })\n        }\n        style={{\n          marginTop: 16,\n          textAlign: 'right',\n        }}\n      />\n    </div>\n  );\n});\n"}},{path:"/_demos/pagination1",title:"\u666e\u901a\u5206\u9875",dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7",mobx:"5.15.4","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{"store/PaginationState.js":{path:"../store/PaginationState",content:'import { decorate, observable, computed } from "mobx";\nimport AsyncState from "mobx-async-state";\n\nconst showTotal = num => `\u5171 ${num} \u6761\u6570\u636e`;\n\nclass PaginationState {\n  constructor(asyncFn, {\n    defaultPageNum = 1,\n    defaultPageSize = 10,\n    defaultTotal = 0,\n    defaultParams,\n    ...restOptions\n  } = {}) {\n    // \u5206\u9875\n    this.page = {\n      pageNum: defaultPageNum,\n      pageSize: defaultPageSize,\n      total: defaultTotal\n    }\n\n    // \u67e5\u8be2\u6761\u4ef6\n    this.params = defaultParams;\n\n    // \u5f02\u6b65\u51fd\u6570\u5b9e\u4f8b\n    this._async = new AsyncState(asyncFn, {\n      ...restOptions,\n      autoRun: false,\n      onSuccess: (res, params) => {\n        // 1. \u8bbe\u7f6e\u5206\u9875\n        this.page.total = res.pageInfo ? res.pageInfo.total : 0;\n\n        if (restOptions.onSuccess) {\n          restOptions.onSuccess(res, params)\n        }\n      }\n    });\n\n    this.mutate = this._async.mutate;\n    this.cancel = this._async.cancel;\n    this.destroy = this._async.destroy;\n    this.changePagination = this.changePagination.bind(this);\n    this.run = this.run.bind(this);\n    this.refresh = this.refresh.bind(this);\n\n    if (typeof restOptions.autoRun === \'undefined\' || restOptions.autoRun) {\n      this.run();\n    }\n  }\n\n  run(params) {\n    // \u5982\u679c\u67e5\u8be2\u53c2\u6570\u53d8\u5316\uff0c\u91cd\u7f6e\u5206\u9875 \u548c \u53c2\u6570\n    if (params) {\n      this.params = params;\n      this.page.pageNum = 1;\n    }\n\n    const { pageNum, pageSize } = this.page;\n\n    // 2. \u4f20\u5165\u53c2\u6570\uff0c\u53d1\u8d77\u8bf7\u6c42\n    return this._async.run({\n      page: { pageSize, pageNum },\n      data: this.params\n    });\n  }\n\n  refresh() {\n    return this.run();\n  }\n\n  // \u76d1\u542c\u5206\u9875\u53d8\u5316\n  changePagination({ pageSize, current }) {\n    this.page = {\n      ...this.page,\n      pageSize,\n      pageNum: current\n    };\n    return this.run();\n  }\n\n  get loading() {\n    return this._async.loading;\n  }\n  get error() {\n    return this._async.error;\n  }\n  get data() {\n    // 3. \u5904\u7406\u8fd4\u56de\u6570\u636e\n    return this._async.data ? this._async.data.data : [];\n  }\n  get pagination() {\n    const { total, pageNum, pageSize } = this.page;\n    return {\n      total,\n      current: pageNum,\n      pageSize,\n      showTotal,\n      showSizeChanger: true\n    }\n  }\n}\n\nexport default decorate(PaginationState, {\n  page: observable,\n  data: computed,\n  error: computed,\n  loading: computed,\n  pagination: computed,\n});\n'},"services/getUserList.js":{path:"../services/getUserList",content:"import Mock from 'mockjs';\n\nconst userList = ({ page: { pageNum, pageSize }, data = {} }) => (\n  Mock.mock({\n    [`data|${pageSize}`]: [{\n      id: '@guid',\n      name: '@cname',\n      'gender|1': ['male', 'female'],\n      email: '@email',\n      disabled: false\n    }],\n    pageInfo: {\n      total: 25\n    },\n    errCode: \"00\",\n    errMsg: \"\"\n  })\n)\n\nexport default function getUserList(params) {\n  console.log(params);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(userList(params))\n    }, 1000)\n  });\n}"}}}),l.a.createElement(y,null)),l.a.createElement("div",{className:"markdown"}),l.a.createElement(s.a,Object(a["a"])({source:{tsx:'import React, { useCallback } from \'react\';\nimport { observer } from "mobx-react-lite";\nimport { Form, Input, Select, Button, Table } from \'antd\';\n\nimport PaginationState from "../store/PaginationState";\nimport getUserList from "../services/getUserList";\n\nconst formItemLayout = {\n  labelCol: { span: 4 },\n  wrapperCol: { span: 14 },\n};\n\nconst buttonItemLayout = {\n  wrapperCol: { offset: 4, span: 14 },\n};\n\nconst columns = [\n  {\n    title: \'name\',\n    dataIndex: \'name\',\n  },\n  {\n    title: \'email\',\n    dataIndex: \'email\',\n  },\n  {\n    title: \'id\',\n    dataIndex: \'id\'\n  },\n  {\n    title: \'gender\',\n    dataIndex: \'gender\'\n  },\n];\n\nconst getUserListState = new PaginationState(getUserList);\n\nexport default observer(() => {\n  const { run, refresh, data, loading, pagination, changePagination } = getUserListState;\n\n  const [form] = Form.useForm();\n\n  const handleReset = useCallback(() => {\n    form.resetFields();\n    run(form.getFieldsValue())\n  }, []);\n\n  return (\n    <div>\n      <Form\n        {...formItemLayout}\n        form={form}\n        initialValues={{}}\n        onFinish={run}\n      >\n        <Form.Item label="name" name="name">\n          <Input placeholder="\u8bf7\u8f93\u5165" />\n        </Form.Item>\n        <Form.Item label="gender" name="gender">\n          <Select placeholder="\u8bf7\u9009\u62e9">\n            <Select.Option value="male">male</Select.Option>\n            <Select.Option value="female">female</Select.Option>\n          </Select>\n        </Form.Item>\n        <Form.Item {...buttonItemLayout}>\n          <Button type="primary" htmlType="submit" loading={loading}>\u67e5\u8be2</Button>\n          <Button onClick={handleReset} style={{ marginLeft: 16 }} disabled={loading}>\u91cd\u7f6e</Button>\n          <Button onClick={refresh} style={{ marginLeft: 16 }} disabled={loading}>\u5237\u65b0</Button>\n        </Form.Item>\n      </Form>\n      <Table\n        dataSource={data || []}\n        columns={columns}\n        pagination={pagination}\n        onChange={changePagination}\n        loading={loading}\n        rowKey="id"\n        bordered\n      />\n    </div>\n  );\n});\n',jsx:"import React, { useCallback } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Form, Input, Select, Button, Table } from 'antd';\nimport PaginationState from '../store/PaginationState';\nimport getUserList from '../services/getUserList';\n\nconst formItemLayout = {\n  labelCol: {\n    span: 4,\n  },\n  wrapperCol: {\n    span: 14,\n  },\n};\nconst buttonItemLayout = {\n  wrapperCol: {\n    offset: 4,\n    span: 14,\n  },\n};\nconst columns = [\n  {\n    title: 'name',\n    dataIndex: 'name',\n  },\n  {\n    title: 'email',\n    dataIndex: 'email',\n  },\n  {\n    title: 'id',\n    dataIndex: 'id',\n  },\n  {\n    title: 'gender',\n    dataIndex: 'gender',\n  },\n];\nconst getUserListState = new PaginationState(getUserList);\nexport default observer(() => {\n  const { run, refresh, data, loading, pagination, changePagination } = getUserListState;\n  const [form] = Form.useForm();\n  const handleReset = useCallback(() => {\n    form.resetFields();\n    run(form.getFieldsValue());\n  }, []);\n  return (\n    <div>\n      <Form {...formItemLayout} form={form} initialValues={{}} onFinish={run}>\n        <Form.Item label=\"name\" name=\"name\">\n          <Input placeholder=\"\u8bf7\u8f93\u5165\" />\n        </Form.Item>\n        <Form.Item label=\"gender\" name=\"gender\">\n          <Select placeholder=\"\u8bf7\u9009\u62e9\">\n            <Select.Option value=\"male\">male</Select.Option>\n            <Select.Option value=\"female\">female</Select.Option>\n          </Select>\n        </Form.Item>\n        <Form.Item {...buttonItemLayout}>\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n            \u67e5\u8be2\n          </Button>\n          <Button\n            onClick={handleReset}\n            style={{\n              marginLeft: 16,\n            }}\n            disabled={loading}\n          >\n            \u91cd\u7f6e\n          </Button>\n          <Button\n            onClick={refresh}\n            style={{\n              marginLeft: 16,\n            }}\n            disabled={loading}\n          >\n            \u5237\u65b0\n          </Button>\n        </Form.Item>\n      </Form>\n      <Table\n        dataSource={data || []}\n        columns={columns}\n        pagination={pagination}\n        onChange={changePagination}\n        loading={loading}\n        rowKey=\"id\"\n        bordered\n      />\n    </div>\n  );\n});\n"}},{path:"/_demos/pagination2",title:"\u67e5\u8be2\u8868\u5355\u548cAnt Table",dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7",mobx:"5.15.4","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{"store/PaginationState.js":{path:"../store/PaginationState",content:'import { decorate, observable, computed } from "mobx";\nimport AsyncState from "mobx-async-state";\n\nconst showTotal = num => `\u5171 ${num} \u6761\u6570\u636e`;\n\nclass PaginationState {\n  constructor(asyncFn, {\n    defaultPageNum = 1,\n    defaultPageSize = 10,\n    defaultTotal = 0,\n    defaultParams,\n    ...restOptions\n  } = {}) {\n    // \u5206\u9875\n    this.page = {\n      pageNum: defaultPageNum,\n      pageSize: defaultPageSize,\n      total: defaultTotal\n    }\n\n    // \u67e5\u8be2\u6761\u4ef6\n    this.params = defaultParams;\n\n    // \u5f02\u6b65\u51fd\u6570\u5b9e\u4f8b\n    this._async = new AsyncState(asyncFn, {\n      ...restOptions,\n      autoRun: false,\n      onSuccess: (res, params) => {\n        // 1. \u8bbe\u7f6e\u5206\u9875\n        this.page.total = res.pageInfo ? res.pageInfo.total : 0;\n\n        if (restOptions.onSuccess) {\n          restOptions.onSuccess(res, params)\n        }\n      }\n    });\n\n    this.mutate = this._async.mutate;\n    this.cancel = this._async.cancel;\n    this.destroy = this._async.destroy;\n    this.changePagination = this.changePagination.bind(this);\n    this.run = this.run.bind(this);\n    this.refresh = this.refresh.bind(this);\n\n    if (typeof restOptions.autoRun === \'undefined\' || restOptions.autoRun) {\n      this.run();\n    }\n  }\n\n  run(params) {\n    // \u5982\u679c\u67e5\u8be2\u53c2\u6570\u53d8\u5316\uff0c\u91cd\u7f6e\u5206\u9875 \u548c \u53c2\u6570\n    if (params) {\n      this.params = params;\n      this.page.pageNum = 1;\n    }\n\n    const { pageNum, pageSize } = this.page;\n\n    // 2. \u4f20\u5165\u53c2\u6570\uff0c\u53d1\u8d77\u8bf7\u6c42\n    return this._async.run({\n      page: { pageSize, pageNum },\n      data: this.params\n    });\n  }\n\n  refresh() {\n    return this.run();\n  }\n\n  // \u76d1\u542c\u5206\u9875\u53d8\u5316\n  changePagination({ pageSize, current }) {\n    this.page = {\n      ...this.page,\n      pageSize,\n      pageNum: current\n    };\n    return this.run();\n  }\n\n  get loading() {\n    return this._async.loading;\n  }\n  get error() {\n    return this._async.error;\n  }\n  get data() {\n    // 3. \u5904\u7406\u8fd4\u56de\u6570\u636e\n    return this._async.data ? this._async.data.data : [];\n  }\n  get pagination() {\n    const { total, pageNum, pageSize } = this.page;\n    return {\n      total,\n      current: pageNum,\n      pageSize,\n      showTotal,\n      showSizeChanger: true\n    }\n  }\n}\n\nexport default decorate(PaginationState, {\n  page: observable,\n  data: computed,\n  error: computed,\n  loading: computed,\n  pagination: computed,\n});\n'},"services/getUserList.js":{path:"../services/getUserList",content:"import Mock from 'mockjs';\n\nconst userList = ({ page: { pageNum, pageSize }, data = {} }) => (\n  Mock.mock({\n    [`data|${pageSize}`]: [{\n      id: '@guid',\n      name: '@cname',\n      'gender|1': ['male', 'female'],\n      email: '@email',\n      disabled: false\n    }],\n    pageInfo: {\n      total: 25\n    },\n    errCode: \"00\",\n    errMsg: \"\"\n  })\n)\n\nexport default function getUserList(params) {\n  console.log(params);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(userList(params))\n    }, 1000)\n  });\n}"}}}),l.a.createElement(S,null)),l.a.createElement("div",{className:"markdown"}),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React from 'react';\nimport { observer } from \"mobx-react-lite\";\nimport { Button, Table } from 'antd';\n\nimport PaginationState from \"../store/PaginationState\";\nimport getUserList from \"../services/getUserList\";\n\nconst columns = [\n  {\n    title: 'name',\n    dataIndex: 'name',\n  },\n  {\n    title: 'email',\n    dataIndex: 'email',\n  },\n  {\n    title: 'id',\n    dataIndex: 'id',\n    sorter: true\n  },\n  {\n    title: 'gender',\n    dataIndex: 'gender',\n    filters: [\n      {\n        text: 'male',\n        value: 'male',\n      },\n      {\n        text: 'female',\n        value: 'female',\n      },\n    ]\n  },\n];\n\nconst getUserListState = new PaginationState(getUserList, {\n  defaultPageSize: 5\n});\n\nexport default observer(() => {\n  const { run, refresh, data, loading, pagination, changePagination } = getUserListState;\n\n  return (\n    <div>\n      <Button onClick={refresh} style={{ marginBottom: 16 }}>\u5237\u65b0</Button>\n      <Table\n        dataSource={data || []}\n        columns={columns}\n        pagination={pagination}\n        onChange={(page: { pageSize: number; current: number;[key: string]: any; }, filters, sorter) => {\n          if (page.current === pagination.current && page.pageSize === pagination.pageSize) {\n            run({ filters, sorter });\n          } else {\n            changePagination(page);\n          }\n        }}\n        loading={loading}\n        rowKey=\"id\"\n        bordered\n      />\n    </div>\n  );\n});\n",jsx:"import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Button, Table } from 'antd';\nimport PaginationState from '../store/PaginationState';\nimport getUserList from '../services/getUserList';\n\nconst columns = [\n  {\n    title: 'name',\n    dataIndex: 'name',\n  },\n  {\n    title: 'email',\n    dataIndex: 'email',\n  },\n  {\n    title: 'id',\n    dataIndex: 'id',\n    sorter: true,\n  },\n  {\n    title: 'gender',\n    dataIndex: 'gender',\n    filters: [\n      {\n        text: 'male',\n        value: 'male',\n      },\n      {\n        text: 'female',\n        value: 'female',\n      },\n    ],\n  },\n];\nconst getUserListState = new PaginationState(getUserList, {\n  defaultPageSize: 5,\n});\nexport default observer(() => {\n  const { run, refresh, data, loading, pagination, changePagination } = getUserListState;\n  return (\n    <div>\n      <Button\n        onClick={refresh}\n        style={{\n          marginBottom: 16,\n        }}\n      >\n        \u5237\u65b0\n      </Button>\n      <Table\n        dataSource={data || []}\n        columns={columns}\n        pagination={pagination}\n        onChange={(page, filters, sorter) => {\n          if (page.current === pagination.current && page.pageSize === pagination.pageSize) {\n            run({\n              filters,\n              sorter,\n            });\n          } else {\n            changePagination(page);\n          }\n        }}\n        loading={loading}\n        rowKey=\"id\"\n        bordered\n      />\n    </div>\n  );\n});\n"}},{path:"/_demos/pagination3",title:"Ant Table",dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7",mobx:"5.15.4","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{"store/PaginationState.js":{path:"../store/PaginationState",content:'import { decorate, observable, computed } from "mobx";\nimport AsyncState from "mobx-async-state";\n\nconst showTotal = num => `\u5171 ${num} \u6761\u6570\u636e`;\n\nclass PaginationState {\n  constructor(asyncFn, {\n    defaultPageNum = 1,\n    defaultPageSize = 10,\n    defaultTotal = 0,\n    defaultParams,\n    ...restOptions\n  } = {}) {\n    // \u5206\u9875\n    this.page = {\n      pageNum: defaultPageNum,\n      pageSize: defaultPageSize,\n      total: defaultTotal\n    }\n\n    // \u67e5\u8be2\u6761\u4ef6\n    this.params = defaultParams;\n\n    // \u5f02\u6b65\u51fd\u6570\u5b9e\u4f8b\n    this._async = new AsyncState(asyncFn, {\n      ...restOptions,\n      autoRun: false,\n      onSuccess: (res, params) => {\n        // 1. \u8bbe\u7f6e\u5206\u9875\n        this.page.total = res.pageInfo ? res.pageInfo.total : 0;\n\n        if (restOptions.onSuccess) {\n          restOptions.onSuccess(res, params)\n        }\n      }\n    });\n\n    this.mutate = this._async.mutate;\n    this.cancel = this._async.cancel;\n    this.destroy = this._async.destroy;\n    this.changePagination = this.changePagination.bind(this);\n    this.run = this.run.bind(this);\n    this.refresh = this.refresh.bind(this);\n\n    if (typeof restOptions.autoRun === \'undefined\' || restOptions.autoRun) {\n      this.run();\n    }\n  }\n\n  run(params) {\n    // \u5982\u679c\u67e5\u8be2\u53c2\u6570\u53d8\u5316\uff0c\u91cd\u7f6e\u5206\u9875 \u548c \u53c2\u6570\n    if (params) {\n      this.params = params;\n      this.page.pageNum = 1;\n    }\n\n    const { pageNum, pageSize } = this.page;\n\n    // 2. \u4f20\u5165\u53c2\u6570\uff0c\u53d1\u8d77\u8bf7\u6c42\n    return this._async.run({\n      page: { pageSize, pageNum },\n      data: this.params\n    });\n  }\n\n  refresh() {\n    return this.run();\n  }\n\n  // \u76d1\u542c\u5206\u9875\u53d8\u5316\n  changePagination({ pageSize, current }) {\n    this.page = {\n      ...this.page,\n      pageSize,\n      pageNum: current\n    };\n    return this.run();\n  }\n\n  get loading() {\n    return this._async.loading;\n  }\n  get error() {\n    return this._async.error;\n  }\n  get data() {\n    // 3. \u5904\u7406\u8fd4\u56de\u6570\u636e\n    return this._async.data ? this._async.data.data : [];\n  }\n  get pagination() {\n    const { total, pageNum, pageSize } = this.page;\n    return {\n      total,\n      current: pageNum,\n      pageSize,\n      showTotal,\n      showSizeChanger: true\n    }\n  }\n}\n\nexport default decorate(PaginationState, {\n  page: observable,\n  data: computed,\n  error: computed,\n  loading: computed,\n  pagination: computed,\n});\n'},"services/getUserList.js":{path:"../services/getUserList",content:"import Mock from 'mockjs';\n\nconst userList = ({ page: { pageNum, pageSize }, data = {} }) => (\n  Mock.mock({\n    [`data|${pageSize}`]: [{\n      id: '@guid',\n      name: '@cname',\n      'gender|1': ['male', 'female'],\n      email: '@email',\n      disabled: false\n    }],\n    pageInfo: {\n      total: 25\n    },\n    errCode: \"00\",\n    errMsg: \"\"\n  })\n)\n\nexport default function getUserList(params) {\n  console.log(params);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(userList(params))\n    }, 1000)\n  });\n}"}}}),l.a.createElement(w,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h4",{id:"api-1"},l.a.createElement("a",{"aria-hidden":"true",href:"#api-1"},l.a.createElement("span",{className:"icon icon-link"})),"API"),l.a.createElement("p",null,"\u67e5\u770b ",l.a.createElement("a",{href:"https://github.com/caijf/mobx-async-state/blob/master/src/demo/store/PaginationState.d.ts",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("code",null,"PaginationState.d.ts"),l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))),l.a.createElement(i.a,{code:"const { \n  ...,\n  changePagination, \n  pagination \n} = new PaginationState(asyncFn, {\n  defaultPageNum,\n  defaultPageSize,\n  defaultTotal,\n  defaultParams\n});\n",lang:"unknown"}),l.a.createElement("h4",{id:"result-1"},l.a.createElement("a",{"aria-hidden":"true",href:"#result-1"},l.a.createElement("span",{className:"icon icon-link"})),"Result"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u53c2\u6570"),l.a.createElement("th",null,"\u8bf4\u660e"),l.a.createElement("th",null,"\u7c7b\u578b"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"changePagination"),l.a.createElement("td",null,"\u9875\u7801\u6539\u53d8\u65f6\u8c03\u7528"),l.a.createElement("td",null,l.a.createElement("code",null,"(","{","current, pageSize","}",") => void"))),l.a.createElement("tr",null,l.a.createElement("td",null,"pagination"),l.a.createElement("td",null,"\u5206\u9875\u6570\u636e ",l.a.createElement("code",null,"current")," ",l.a.createElement("code",null,"pageSize")," ",l.a.createElement("code",null,"total")),l.a.createElement("td",null,l.a.createElement("code",null,"object"))))),l.a.createElement("h4",{id:"params-1"},l.a.createElement("a",{"aria-hidden":"true",href:"#params-1"},l.a.createElement("span",{className:"icon icon-link"})),"Params"),l.a.createElement("p",null,"\u5c06\u9ed8\u8ba4\u5206\u9875\u4e0e\u9ed8\u8ba4\u53c2\u6570\u63d0\u53d6\u51fa\u6765\uff0c\u4fbf\u4e8e\u5b9e\u73b0\u7f13\u5b58\u3002"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u53c2\u6570"),l.a.createElement("th",null,"\u8bf4\u660e"),l.a.createElement("th",null,"\u7c7b\u578b"),l.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"defaultPageNum"),l.a.createElement("td",null,"\u9ed8\u8ba4\u5f53\u524d\u9875\u9762"),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,l.a.createElement("code",null,"1"))),l.a.createElement("tr",null,l.a.createElement("td",null,"defaultPageSize"),l.a.createElement("td",null,"\u9ed8\u8ba4\u6bcf\u9875\u7684\u6570\u91cf"),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,l.a.createElement("code",null,"10"))),l.a.createElement("tr",null,l.a.createElement("td",null,"defaultTotal"),l.a.createElement("td",null,"\u9ed8\u8ba4\u603b\u6570\u91cf"),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,l.a.createElement("code",null,"0"))))),l.a.createElement("h3",{id:"\u52a0\u8f7d\u66f4\u591a"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u52a0\u8f7d\u66f4\u591a"},l.a.createElement("span",{className:"icon icon-link"})),"\u52a0\u8f7d\u66f4\u591a"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u81ea\u52a8\u7ba1\u7406\u5206\u9875\u6761\u4ef6 ",l.a.createElement("code",null,"page")," \uff0c ",l.a.createElement("code",null,"page: ","{","pageNum: number, pageSize: number","}")," \u3002"),l.a.createElement("li",null,"\u81ea\u52a8\u7ba1\u7406\u5217\u8868\u6570\u636e\uff0c\u8fd4\u56de\u7684\u6570\u636e ",l.a.createElement("code",null,"data")," \u5373\u4e3a\u5408\u5e76\u6570\u7ec4\u3002"),l.a.createElement("li",null,"\u9996\u6b21\u52a0\u8f7d\u9700\u901a\u8fc7\u8c03\u7528 ",l.a.createElement("code",null,"run"),"\uff0c\u5e76\u4f20\u5165\u9664\u5206\u9875\u5916\u7684\u67e5\u8be2\u53c2\u6570\u3002"),l.a.createElement("li",null,"\u52a0\u8f7d\u4e0b\u4e00\u9875 ",l.a.createElement("code",null,"loadMore")," \u6216 \u91cd\u65b0\u52a0\u8f7d ",l.a.createElement("code",null,"reload")," \u4f1a\u81ea\u52a8\u5e26\u5165\u4e4b\u524d\u53c2\u6570\uff0c\u5e76\u81ea\u52a8\u7ba1\u7406\u5206\u9875\u53c2\u6570\u3002"),l.a.createElement("li",null,l.a.createElement("code",null,"loadingMore")," \u4ec5\u5728\u975e\u9996\u9875\u52a0\u8f7d\u65f6\u4e3a ",l.a.createElement("code",null,"true")," \u3002"),l.a.createElement("li",null,l.a.createElement("code",null,"refresh")," \u548c ",l.a.createElement("code",null,"reload")," \u662f\u4e00\u6837\u7684\uff0c\u5c06\u4f1a\u91cd\u7f6e\u5f53\u524d\u9875\u7801\u4e3a ",l.a.createElement("code",null,"1"),"\uff0c\u5e76\u89e6\u53d1\u8bf7\u6c42\u3002")),l.a.createElement("h4",{id:"loadmorestate"},l.a.createElement("a",{"aria-hidden":"true",href:"#loadmorestate"},l.a.createElement("span",{className:"icon icon-link"})),"LoadMoreState")),l.a.createElement(s.a,Object(a["a"])({source:{tsx:'import React, { useEffect } from \'react\';\nimport { observer } from "mobx-react-lite";\nimport { Button, Spin, List, Typography } from \'antd\';\n\nimport LoadMoreState from "../store/LoadMoreState";\nimport getUserList from "../services/getUserList";\n\nconst getUserListState = new LoadMoreState(getUserList, {\n  defaultPageSize: 5,\n  autoRun: false\n});\n\nexport default observer(() => {\n  const { run, data, loading, loadingMore, done, loadMore } = getUserListState;\n\n  useEffect(() => {\n    run({ someParams: 1 });\n  }, []);\n\n  return (\n    <div>\n      <Spin spinning={loading && !loadingMore}>\n        <List\n          dataSource={data}\n          renderItem={(item: any) => (\n            <List.Item key={item.id}>\n              <Typography.Text mark>[{item.id}]</Typography.Text> {item.name}\n            </List.Item>\n          )}\n        />\n      </Spin>\n      <Button\n        onClick={() => loadMore()}\n        loading={loadingMore}\n        disabled={done}\n      >\n        click to load more\n      </Button>\n    </div>\n  );\n});\n',jsx:"import React, { useEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Button, Spin, List, Typography } from 'antd';\nimport LoadMoreState from '../store/LoadMoreState';\nimport getUserList from '../services/getUserList';\n\nconst getUserListState = new LoadMoreState(getUserList, {\n  defaultPageSize: 5,\n  autoRun: false,\n});\nexport default observer(() => {\n  const { run, data, loading, loadingMore, done, loadMore } = getUserListState;\n  useEffect(() => {\n    run({\n      someParams: 1,\n    });\n  }, []);\n  return (\n    <div>\n      <Spin spinning={loading && !loadingMore}>\n        <List\n          dataSource={data}\n          renderItem={item => (\n            <List.Item key={item.id}>\n              <Typography.Text mark>[{item.id}]</Typography.Text> {item.name}\n            </List.Item>\n          )}\n        />\n      </Spin>\n      <Button onClick={() => loadMore()} loading={loadingMore} disabled={done}>\n        click to load more\n      </Button>\n    </div>\n  );\n});\n"}},{path:"/_demos/load-more1",title:"\u57fa\u672c\u7528\u6cd5",desc:'<div class="markdown"><p>\u9996\u6b21\u52a0\u8f7d\u9700\u901a\u8fc7\u8c03\u7528 <code>run</code>\uff0c\u5e76\u4f20\u5165\u67e5\u8be2\u53c2\u6570\u3002</p>\n<p>\u52a0\u8f7d\u4e0b\u4e00\u9875 <code>loadMore</code> \u6216 \u91cd\u65b0\u52a0\u8f7d <code>reload</code> \u4f1a\u81ea\u52a8\u5e26\u5165\u4e4b\u524d\u53c2\u6570\u548c\u5206\u9875\u3002</p></div>',dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7",mobx:"5.15.4","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{"store/LoadMoreState.js":{path:"../store/LoadMoreState",content:'import { decorate, observable, computed, action, toJS } from "mobx";\nimport AsyncState from "mobx-async-state";\n\nclass LoadMoreState {\n  constructor(asyncFn, {\n    defaultParams,\n    defaultPageSize = 10,\n    ...restOptions\n  } = {}) {\n    // \u5206\u9875\n    this.page = {\n      pageNum: 1,\n      pageSize: defaultPageSize,\n      total: 0\n    }\n    // \u67e5\u8be2\u6761\u4ef6\n    this.params = defaultParams;\n\n    // \u6570\u636e\n    this.originData = [];\n\n    // \u5f02\u6b65\u51fd\u6570\u5b9e\u4f8b\n    this._async = new AsyncState(asyncFn, {\n      ...restOptions,\n      autoRun: false,\n      onSuccess: (res, params) => {\n        // 1. \u8bbe\u7f6e\u5206\u9875\u548c\u6570\u636e\n        this.page.total = res.pageInfo ? res.pageInfo.total : 0;\n        if (this.page.pageNum === 1) {\n          this.originData = res.data;\n        } else {\n          this.originData = this.originData.concat(res.data);\n        }\n\n        if (this.page.pageSize * this.page.pageNum >= this.page.total) {\n          this.done = true;\n        }\n\n        if (restOptions.onSuccess) {\n          restOptions.onSuccess(res, params);\n        }\n      },\n      onError: (err, params) => {\n        // \u8bf7\u6c42\u5931\u8d25\uff0c\u5982\u679c\u4e0d\u662f\u7b2c\u4e00\u9875\uff0c\u9875\u7801\u51cf\u4e00\n        if (this.page.pageNum > 1) {\n          this.page.pageNum -= 1;\n        }\n        if (restOptions.onError) {\n          restOptions.onError(err, params);\n        }\n      }\n    });\n\n    this.run = this.run.bind(this);\n    this.loadMore = this.loadMore.bind(this);\n    this.reload = this.reload.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.destroy = this.destroy.bind(this);\n\n    this.refresh = this.reload;\n    this.mutate = this._async.mutate;\n\n    if (typeof restOptions.autoRun === \'undefined\' || restOptions.autoRun) {\n      this.run(defaultParams);\n    }\n  }\n\n  get data() {\n    return toJS(this.originData);\n  }\n  get loading() {\n    return this._async.loading;\n  }\n  get loadingMore() {\n    return this.loading && this.page.pageNum !== 1;\n  }\n  get error() {\n    return this._async.error;\n  }\n  get pagination() {\n    const { pageNum, ...restPage } = this.page;\n    return {\n      current: pageNum,\n      ...restPage\n    };\n  }\n  // \u4f20\u5165\u53c2\u6570\uff0c\u53d1\u8d77\u8bf7\u6c42\n  run(params) {\n    this.params = params;\n    const { pageNum, pageSize } = this.page;\n\n    // 2. \u4f20\u5165\u53c2\u6570\uff0c\u53d1\u8d77\u8bf7\u6c42\n    return this._async.run({\n      page: { pageNum, pageSize },\n      data: this.params\n    });\n  }\n  // \u8bf7\u6c42\u4e0b\u4e00\u9875\n  loadMore() {\n    if (this.done || this.loading) {\n      return;\n    }\n    this.page.pageNum += 1;\n    return this.run(this.params);\n  }\n  // \u91cd\u7f6e\u5230\u7b2c\u4e00\u9875\uff0c\u53d1\u8d77\u8bf7\u6c42\n  reload() {\n    this.done = false;\n    this.cancel();\n    this.page.pageNum = 1;\n    return this.run(this.params);\n  }\n  cancel() {\n    if (this.loading && this.page.pageNum > 1) {\n      this.page.pageNum -= 1;\n    }\n    this._async.cancel();\n  }\n  destroy() {\n    this.cancel()\n    this._async.destroy();\n  }\n}\n\nexport default decorate(LoadMoreState, {\n  page: observable,\n  done: observable,\n  originData: observable,\n  data: computed,\n  loading: computed,\n  loadingMore: computed,\n  pagination: computed,\n  error: computed,\n  loadMore: action,\n  reload: action\n});'},"services/getUserList.js":{path:"../services/getUserList",content:"import Mock from 'mockjs';\n\nconst userList = ({ page: { pageNum, pageSize }, data = {} }) => (\n  Mock.mock({\n    [`data|${pageSize}`]: [{\n      id: '@guid',\n      name: '@cname',\n      'gender|1': ['male', 'female'],\n      email: '@email',\n      disabled: false\n    }],\n    pageInfo: {\n      total: 25\n    },\n    errCode: \"00\",\n    errMsg: \"\"\n  })\n)\n\nexport default function getUserList(params) {\n  console.log(params);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(userList(params))\n    }, 1000)\n  });\n}"}}}),l.a.createElement(x,null)),l.a.createElement("div",{className:"markdown"}),l.a.createElement(s.a,Object(a["a"])({source:{tsx:"import React, { useRef, useEffect } from 'react';\nimport { observer } from \"mobx-react-lite\";\nimport { Avatar, Button, List } from 'antd';\n\nimport LoadMoreState from \"../store/LoadMoreState\";\nimport useScrollToLower from \"../hooks/useScrollToLower\";\nimport getUserList from \"../services/getUserList\";\n\nconst getUserListState = new LoadMoreState(getUserList, {\n  autoRun: false\n});\n\nconst Footer = observer(() => {\n  const { done, loadMore, loading, pagination } = getUserListState;\n  return (\n    <>\n      {done ? <span>No more data</span> : (\n        <Button onClick={loadMore} loading={loading}>\n          {loading ? 'Loading more' : 'Click to load more'}\n        </Button>\n      )}\n\n      <span style={{ float: 'right', fontSize: 12 }}>total: {pagination.total}</span>\n    </>\n  )\n});\n\nexport default observer(() => {\n  const containerRef = useRef(null);\n  const { run, data, loading, loadingMore, done, loadMore, reload } = getUserListState;\n\n  useEffect(() => {\n    run({ a: 1 });\n  }, []);\n  // console.log('loading:', loading, ' done:', done, ' data:', data);\n  useScrollToLower({\n    ready: !loading && !done,\n    onLoad: loadMore,\n    ref: containerRef\n  });\n\n  return (\n    <div ref={containerRef} style={{ height: 300, overflowY: 'auto' }}>\n      <List\n        header={\n          <Button onClick={reload} loading={loading && !loadingMore} disabled={loadingMore}>\n            Reload\n          </Button>\n        }\n        footer={<Footer />}\n        loading={loading && !loadingMore}\n        bordered\n        dataSource={data}\n        renderItem={(item: any) => (\n          <List.Item>\n            <List.Item.Meta\n              avatar={\n                <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n              }\n              title={<a>{item.name}</a>}\n              description=\"rc-hooks is a react hooks library\"\n            />\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n});\n",jsx:"import React, { useRef, useEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Avatar, Button, List } from 'antd';\nimport LoadMoreState from '../store/LoadMoreState';\nimport useScrollToLower from '../hooks/useScrollToLower';\nimport getUserList from '../services/getUserList';\n\nconst getUserListState = new LoadMoreState(getUserList, {\n  autoRun: false,\n});\nconst Footer = observer(() => {\n  const { done, loadMore, loading, pagination } = getUserListState;\n  return (\n    <>\n      {done ? (\n        <span>No more data</span>\n      ) : (\n        <Button onClick={loadMore} loading={loading}>\n          {loading ? 'Loading more' : 'Click to load more'}\n        </Button>\n      )}\n\n      <span\n        style={{\n          float: 'right',\n          fontSize: 12,\n        }}\n      >\n        total: {pagination.total}\n      </span>\n    </>\n  );\n});\nexport default observer(() => {\n  const containerRef = useRef(null);\n  const { run, data, loading, loadingMore, done, loadMore, reload } = getUserListState;\n  useEffect(() => {\n    run({\n      a: 1,\n    });\n  }, []); // console.log('loading:', loading, ' done:', done, ' data:', data);\n\n  useScrollToLower({\n    ready: !loading && !done,\n    onLoad: loadMore,\n    ref: containerRef,\n  });\n  return (\n    <div\n      ref={containerRef}\n      style={{\n        height: 300,\n        overflowY: 'auto',\n      }}\n    >\n      <List\n        header={\n          <Button onClick={reload} loading={loading && !loadingMore} disabled={loadingMore}>\n            Reload\n          </Button>\n        }\n        footer={<Footer />}\n        loading={loading && !loadingMore}\n        bordered\n        dataSource={data}\n        renderItem={item => (\n          <List.Item>\n            <List.Item.Meta\n              avatar={\n                <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n              }\n              title={<a>{item.name}</a>}\n              description=\"rc-hooks is a react hooks library\"\n            />\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n});\n"}},{path:"/_demos/load-more2",title:"\u4e0a\u62c9\u52a0\u8f7d\u66f4\u591a",dependencies:{antd:"4.4.0","mobx-react-lite":"2.0.7",mobx:"5.15.4","mobx-async-state":"1.1.0",mockjs:"1.1.0"},files:{"store/LoadMoreState.js":{path:"../store/LoadMoreState",content:'import { decorate, observable, computed, action, toJS } from "mobx";\nimport AsyncState from "mobx-async-state";\n\nclass LoadMoreState {\n  constructor(asyncFn, {\n    defaultParams,\n    defaultPageSize = 10,\n    ...restOptions\n  } = {}) {\n    // \u5206\u9875\n    this.page = {\n      pageNum: 1,\n      pageSize: defaultPageSize,\n      total: 0\n    }\n    // \u67e5\u8be2\u6761\u4ef6\n    this.params = defaultParams;\n\n    // \u6570\u636e\n    this.originData = [];\n\n    // \u5f02\u6b65\u51fd\u6570\u5b9e\u4f8b\n    this._async = new AsyncState(asyncFn, {\n      ...restOptions,\n      autoRun: false,\n      onSuccess: (res, params) => {\n        // 1. \u8bbe\u7f6e\u5206\u9875\u548c\u6570\u636e\n        this.page.total = res.pageInfo ? res.pageInfo.total : 0;\n        if (this.page.pageNum === 1) {\n          this.originData = res.data;\n        } else {\n          this.originData = this.originData.concat(res.data);\n        }\n\n        if (this.page.pageSize * this.page.pageNum >= this.page.total) {\n          this.done = true;\n        }\n\n        if (restOptions.onSuccess) {\n          restOptions.onSuccess(res, params);\n        }\n      },\n      onError: (err, params) => {\n        // \u8bf7\u6c42\u5931\u8d25\uff0c\u5982\u679c\u4e0d\u662f\u7b2c\u4e00\u9875\uff0c\u9875\u7801\u51cf\u4e00\n        if (this.page.pageNum > 1) {\n          this.page.pageNum -= 1;\n        }\n        if (restOptions.onError) {\n          restOptions.onError(err, params);\n        }\n      }\n    });\n\n    this.run = this.run.bind(this);\n    this.loadMore = this.loadMore.bind(this);\n    this.reload = this.reload.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.destroy = this.destroy.bind(this);\n\n    this.refresh = this.reload;\n    this.mutate = this._async.mutate;\n\n    if (typeof restOptions.autoRun === \'undefined\' || restOptions.autoRun) {\n      this.run(defaultParams);\n    }\n  }\n\n  get data() {\n    return toJS(this.originData);\n  }\n  get loading() {\n    return this._async.loading;\n  }\n  get loadingMore() {\n    return this.loading && this.page.pageNum !== 1;\n  }\n  get error() {\n    return this._async.error;\n  }\n  get pagination() {\n    const { pageNum, ...restPage } = this.page;\n    return {\n      current: pageNum,\n      ...restPage\n    };\n  }\n  // \u4f20\u5165\u53c2\u6570\uff0c\u53d1\u8d77\u8bf7\u6c42\n  run(params) {\n    this.params = params;\n    const { pageNum, pageSize } = this.page;\n\n    // 2. \u4f20\u5165\u53c2\u6570\uff0c\u53d1\u8d77\u8bf7\u6c42\n    return this._async.run({\n      page: { pageNum, pageSize },\n      data: this.params\n    });\n  }\n  // \u8bf7\u6c42\u4e0b\u4e00\u9875\n  loadMore() {\n    if (this.done || this.loading) {\n      return;\n    }\n    this.page.pageNum += 1;\n    return this.run(this.params);\n  }\n  // \u91cd\u7f6e\u5230\u7b2c\u4e00\u9875\uff0c\u53d1\u8d77\u8bf7\u6c42\n  reload() {\n    this.done = false;\n    this.cancel();\n    this.page.pageNum = 1;\n    return this.run(this.params);\n  }\n  cancel() {\n    if (this.loading && this.page.pageNum > 1) {\n      this.page.pageNum -= 1;\n    }\n    this._async.cancel();\n  }\n  destroy() {\n    this.cancel()\n    this._async.destroy();\n  }\n}\n\nexport default decorate(LoadMoreState, {\n  page: observable,\n  done: observable,\n  originData: observable,\n  data: computed,\n  loading: computed,\n  loadingMore: computed,\n  pagination: computed,\n  error: computed,\n  loadMore: action,\n  reload: action\n});'},"hooks/useScrollToLower.js":{path:"../hooks/useScrollToLower",content:"import { useEffect, useCallback } from 'react';\n\nconst useScrollToLower = ({\n  ref = null,\n  threshold = 100,\n  ready = false,\n  onLoad = () => { }\n} = {}) => {\n  const scrollMethod = useCallback(() => {\n    if (!ready) {\n      return;\n    }\n    if (ref.current.scrollHeight - ref.current.scrollTop <= ref.current.clientHeight + threshold) {\n      onLoad();\n    }\n  }, [ready, ref]);\n\n  useEffect(() => {\n    if (!ref || !ref.current) {\n      return () => { };\n    }\n\n    ref.current.addEventListener('scroll', scrollMethod);\n    return () => {\n      if (ref && ref.current) {\n        ref.current.removeEventListener('scroll', scrollMethod);\n      }\n    };\n  }, [scrollMethod]);\n}\n\nexport default useScrollToLower;"},"services/getUserList.js":{path:"../services/getUserList",content:"import Mock from 'mockjs';\n\nconst userList = ({ page: { pageNum, pageSize }, data = {} }) => (\n  Mock.mock({\n    [`data|${pageSize}`]: [{\n      id: '@guid',\n      name: '@cname',\n      'gender|1': ['male', 'female'],\n      email: '@email',\n      disabled: false\n    }],\n    pageInfo: {\n      total: 25\n    },\n    errCode: \"00\",\n    errMsg: \"\"\n  })\n)\n\nexport default function getUserList(params) {\n  console.log(params);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(userList(params))\n    }, 1000)\n  });\n}"}}}),l.a.createElement(k,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h4",{id:"api-2"},l.a.createElement("a",{"aria-hidden":"true",href:"#api-2"},l.a.createElement("span",{className:"icon icon-link"})),"API"),l.a.createElement("p",null,"\u67e5\u770b ",l.a.createElement("a",{href:"https://github.com/caijf/mobx-async-state/blob/master/src/demo/store/LoadMoreState.d.ts",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("code",null,"LoadMoreState.d.ts"),l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))),l.a.createElement(i.a,{code:"const { \n  ...,\n  reload,\n  loadMore,\n  loadingMore,\n  done,\n  pagination\n} = new LoadMoreState(asyncFn, {\n  defaultPageSize\n});\n",lang:"unknown"}),l.a.createElement("h4",{id:"result-2"},l.a.createElement("a",{"aria-hidden":"true",href:"#result-2"},l.a.createElement("span",{className:"icon icon-link"})),"Result"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u53c2\u6570"),l.a.createElement("th",null,"\u8bf4\u660e"),l.a.createElement("th",null,"\u7c7b\u578b"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"reload"),l.a.createElement("td",null,"\u89e6\u53d1\u91cd\u65b0\u52a0\u8f7d"),l.a.createElement("td",null,l.a.createElement("code",null,"() => void"))),l.a.createElement("tr",null,l.a.createElement("td",null,"loadMore"),l.a.createElement("td",null,"\u89e6\u53d1\u52a0\u8f7d\u66f4\u591a"),l.a.createElement("td",null,l.a.createElement("code",null,"() => void"))),l.a.createElement("tr",null,l.a.createElement("td",null,"loadingMore"),l.a.createElement("td",null,"\u662f\u5426\u6b63\u5728\u52a0\u8f7d\u66f4\u591a"),l.a.createElement("td",null,l.a.createElement("code",null,"boolean"))),l.a.createElement("tr",null,l.a.createElement("td",null,"done"),l.a.createElement("td",null,"\u662f\u5426\u52a0\u8f7d\u5b8c\u6210"),l.a.createElement("td",null,l.a.createElement("code",null,"boolean"))),l.a.createElement("tr",null,l.a.createElement("td",null,"pagination"),l.a.createElement("td",null,"\u5206\u9875\u6570\u636e ",l.a.createElement("code",null,"current")," ",l.a.createElement("code",null,"pageSize")," ",l.a.createElement("code",null,"total")),l.a.createElement("td",null,l.a.createElement("code",null,"object"))))),l.a.createElement("h4",{id:"params-2"},l.a.createElement("a",{"aria-hidden":"true",href:"#params-2"},l.a.createElement("span",{className:"icon icon-link"})),"Params"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u53c2\u6570"),l.a.createElement("th",null,"\u8bf4\u660e"),l.a.createElement("th",null,"\u7c7b\u578b"),l.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"defaultPageSize"),l.a.createElement("td",null,"\u9ed8\u8ba4\u6bcf\u9875\u7684\u6570\u91cf"),l.a.createElement("td",null,l.a.createElement("code",null,"number")),l.a.createElement("td",null,l.a.createElement("code",null,"10")))))))}},L3Xe:function(e,n,t){"use strict";t.r(n);t("Mwp2");var a=t("VXEj"),r=(t("Telt"),t("Tckk")),l=(t("+L6B"),t("2/Rp")),o=t("q1tI"),i=t.n(o),c=t("riab"),s=t("wbB8"),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.ref,t=void 0===n?null:n,a=e.threshold,r=void 0===a?100:a,l=e.ready,i=void 0!==l&&l,c=e.onLoad,s=void 0===c?()=>{}:c,u=Object(o["useCallback"])(()=>{i&&t.current.scrollHeight-t.current.scrollTop<=t.current.clientHeight+r&&s()},[i,t]);Object(o["useEffect"])(()=>t&&t.current?(t.current.addEventListener("scroll",u),()=>{t&&t.current&&t.current.removeEventListener("scroll",u)}):()=>{},[u])},m=u,d=t("2PqJ"),p=new s["a"](d["a"],{autoRun:!1}),g=Object(c["a"])(()=>{var e=p.done,n=p.loadMore,t=p.loading,a=p.pagination;return i.a.createElement(i.a.Fragment,null,e?i.a.createElement("span",null,"No more data"):i.a.createElement(l["a"],{onClick:n,loading:t},t?"Loading more":"Click to load more"),i.a.createElement("span",{style:{float:"right",fontSize:12}},"total: ",a.total))});n["default"]=Object(c["a"])(()=>{var e=Object(o["useRef"])(null),n=p.run,t=p.data,c=p.loading,s=p.loadingMore,u=p.done,d=p.loadMore,h=p.reload;return Object(o["useEffect"])(()=>{n({a:1})},[]),m({ready:!c&&!u,onLoad:d,ref:e}),i.a.createElement("div",{ref:e,style:{height:300,overflowY:"auto"}},i.a.createElement(a["b"],{header:i.a.createElement(l["a"],{onClick:h,loading:c&&!s,disabled:s},"Reload"),footer:i.a.createElement(g,null),loading:c&&!s,bordered:!0,dataSource:t,renderItem:e=>i.a.createElement(a["b"].Item,null,i.a.createElement(a["b"].Item.Meta,{avatar:i.a.createElement(r["a"],{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:i.a.createElement("a",null,e.name),description:"rc-hooks is a react hooks library"}))}))})},Op2u:function(e,n,t){"use strict";var a=t("VTBJ"),r=t("Ff2n"),l=t("2vnA"),o=t("tjUo"),i=e=>"\u5171 ".concat(e," \u6761\u6570\u636e");class c{constructor(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.defaultPageNum,l=void 0===t?1:t,i=n.defaultPageSize,c=void 0===i?10:i,s=n.defaultTotal,u=void 0===s?0:s,m=n.defaultParams,d=Object(r["a"])(n,["defaultPageNum","defaultPageSize","defaultTotal","defaultParams"]);this.page={pageNum:l,pageSize:c,total:u},this.params=m,this._async=new o["a"](e,Object(a["a"])(Object(a["a"])({},d),{},{autoRun:!1,onSuccess:(e,n)=>{this.page.total=e.pageInfo?e.pageInfo.total:0,d.onSuccess&&d.onSuccess(e,n)}})),this.mutate=this._async.mutate,this.cancel=this._async.cancel,this.destroy=this._async.destroy,this.changePagination=this.changePagination.bind(this),this.run=this.run.bind(this),this.refresh=this.refresh.bind(this),("undefined"===typeof d.autoRun||d.autoRun)&&this.run()}run(e){e&&(this.params=e,this.page.pageNum=1);var n=this.page,t=n.pageNum,a=n.pageSize;return this._async.run({page:{pageSize:a,pageNum:t},data:this.params})}refresh(){return this.run()}changePagination(e){var n=e.pageSize,t=e.current;return this.page=Object(a["a"])(Object(a["a"])({},this.page),{},{pageSize:n,pageNum:t}),this.run()}get loading(){return this._async.loading}get error(){return this._async.error}get data(){return this._async.data?this._async.data.data:[]}get pagination(){var e=this.page,n=e.total,t=e.pageNum,a=e.pageSize;return{total:n,current:t,pageSize:a,showTotal:i,showSizeChanger:!0}}}n["a"]=Object(l["decorate"])(c,{page:l["observable"],data:l["computed"],error:l["computed"],loading:l["computed"],pagination:l["computed"]})},QndZ:function(e,n,t){"use strict";t.r(n);t("g9YV");var a=t("wCAj"),r=(t("+L6B"),t("2/Rp")),l=t("q1tI"),o=t.n(l),i=t("riab"),c=t("Op2u"),s=t("2PqJ"),u=[{title:"name",dataIndex:"name"},{title:"email",dataIndex:"email"},{title:"id",dataIndex:"id",sorter:!0},{title:"gender",dataIndex:"gender",filters:[{text:"male",value:"male"},{text:"female",value:"female"}]}],m=new c["a"](s["a"],{defaultPageSize:5});n["default"]=Object(i["a"])(()=>{var e=m.run,n=m.refresh,t=m.data,l=m.loading,i=m.pagination,c=m.changePagination;return o.a.createElement("div",null,o.a.createElement(r["a"],{onClick:n,style:{marginBottom:16}},"\u5237\u65b0"),o.a.createElement(a["a"],{dataSource:t||[],columns:u,pagination:i,onChange:(n,t,a)=>{n.current===i.current&&n.pageSize===i.pageSize?e({filters:t,sorter:a}):c(n)},loading:l,rowKey:"id",bordered:!0}))})},RJxA:function(e,n,t){"use strict";t.r(n);t("OaEy");var a=t("2fM7"),r=t("q1tI"),l=t.n(r),o=t("riab"),i=t("tjUo"),c=t("luuv"),s=t.n(c);function u(e){return console.log(e),new Promise(e=>{setTimeout(()=>{e(s.a.mock({"data|5":["@email"]}).data)},300)})}var m=a["a"].Option,d=new i["a"](u,{throttleInterval:1e3,autoRun:!1});n["default"]=Object(o["a"])(()=>{var e=d.data,n=void 0===e?[]:e,t=d.run,r=d.cancel,o=d.loading;return l.a.createElement("div",null,l.a.createElement("p",null,"Enter quickly to see the effect"),l.a.createElement(a["a"],{showSearch:!0,placeholder:"Select Emails",filterOption:!1,onSearch:t,onBlur:r,loading:o,style:{width:300}},n.map(e=>l.a.createElement(m,{key:e,value:e},e))))})},VSD4:function(e,n,t){"use strict";t.r(n);t("+L6B");var a=t("2/Rp"),r=(t("5NDa"),t("5rEg")),l=(t("miYZ"),t("tsqr")),o=t("ODXe"),i=(t("H0JD"),t("q1tI")),c=t.n(i),s=t("riab"),u=t("tjUo");function m(e){return console.log(e),new Promise(e=>{setTimeout(()=>{e({success:!0})},1e3)})}var d=new u["a"](m,{autoRun:!1});n["default"]=Object(s["a"])(()=>{var e=Object(i["useState"])(""),n=Object(o["a"])(e,2),t=n[0],s=n[1],u=d.run,m=d.loading,p=Object(i["useCallback"])(e=>{u(e).then(e=>{e.success&&(s(""),l["a"].success('The username was changed to "'.concat(d.params[0],'" !')))})},[]);return c.a.createElement("div",null,c.a.createElement(r["a"],{onChange:e=>s(e.target.value),value:t,placeholder:"Please enter username",style:{width:240,marginRight:16}}),c.a.createElement(a["a"],{onClick:()=>p(t),loading:m},"Edit"))})},aTMo:function(e,n,t){"use strict";t.r(n);t("T2oS");var a=t("W9HT"),r=(t("+L6B"),t("2/Rp")),l=t("q1tI"),o=t.n(l),i=t("riab"),c=t("tjUo");function s(){return new Promise(e=>{setTimeout(()=>{e((new Date).getTime())},100)})}var u=new c["a"](s),m=new c["a"](s,{loadingDelay:200});n["default"]=Object(i["a"])(()=>{var e=()=>{u.run(),m.run()};return o.a.createElement("div",null,o.a.createElement("p",null,"loadingDelay can set delay loading, which can effectively prevent loading from flickering."),o.a.createElement(r["a"],{onClick:e},"run"),o.a.createElement("div",{style:{margin:"24px 0",width:300}},o.a.createElement(a["a"],{spinning:u.loading},"Double Count: ",u.data)),o.a.createElement("div",null,o.a.createElement(a["a"],{spinning:m.loading},"Double Count: ",m.data)))})},bCY9:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t("LtsZ"),r=new a["Plugin"]({validKeys:["patchRoutes","rootContainer","render","onRouteChange"]})},erZ4:function(e,n,t){"use strict";t.r(n);t("+L6B");var a=t("2/Rp"),r=(t("T2oS"),t("W9HT")),l=t("q1tI"),o=t.n(l),i=t("riab"),c=t("tjUo"),s=t("luuv"),u=t.n(s);function m(){return new Promise(e=>{setTimeout(()=>{e(u.a.mock("@name"))},1e3)})}var d=new c["a"](m,{pollingInterval:1e3,pollingWhenHidden:!1});n["default"]=Object(i["a"])(()=>{var e=d.loading,n=d.data,t=d.cancel,l=d.run;return o.a.createElement(o.a.Fragment,null,o.a.createElement(r["a"],{spinning:e},o.a.createElement("p",null,"Username: ",n)),o.a.createElement(a["a"].Group,null,o.a.createElement(a["a"],{onClick:l},"start"),o.a.createElement(a["a"],{onClick:t},"stop")))})},gql7:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),r=t.n(a),l=(t("B2uJ"),t("+su7"),t("qOys")),o=t.n(l);t("5Yjd");n["default"]=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"mobx-async-state"},r.a.createElement("a",{"aria-hidden":"true",href:"#mobx-async-state"},r.a.createElement("span",{className:"icon icon-link"})),"mobx-async-state"),r.a.createElement("blockquote",null,r.a.createElement("p",null,"\u5982\u679c\u4f60\u4f7f\u7528\u7684 ",r.a.createElement("code",null,"react")," \u7248\u672c\u4e3a ",r.a.createElement("code",null,"16.8")," \u53ca\u4ee5\u4e0a\uff0c\u63a8\u8350\u4f7f\u7528 ",r.a.createElement("code",null,"hooks")," \u5b9e\u73b0\u7684 ",r.a.createElement("a",{href:"https://doly-dev.github.io/rc-hooks/site/#/async/use-async",target:"_blank",rel:"noopener noreferrer"},"useAsync",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}))),"\u3002")),r.a.createElement("p",null,"Mobx \u5f02\u6b65\u51fd\u6570\u7684\u72b6\u6001\u7ba1\u7406\uff0c\u81ea\u52a8\u89c2\u5bdf ",r.a.createElement("code",null,"loading")," ",r.a.createElement("code",null,"data")," ",r.a.createElement("code",null,"error")," \u6570\u636e\u3002",r.a.createElement("a",{href:"https://caijf.github.io/mobx-async-state/site/#/mobx-asnyc-state",target:"_blank",rel:"noopener noreferrer"},"\u67e5\u770b\u6587\u6863\u793a\u4f8b",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))),r.a.createElement("h2",{id:"\u5bf9\u6bd4-hooks"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u5bf9\u6bd4-hooks"},r.a.createElement("span",{className:"icon icon-link"})),"\u5bf9\u6bd4 hooks"),r.a.createElement("p",null,"API \u5b8c\u5168\u4e0e ",r.a.createElement("a",{href:"https://doly-dev.github.io/rc-hooks/site/#/",target:"_blank",rel:"noopener noreferrer"},"rc-hooks",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))," \u7684 ",r.a.createElement("a",{href:"https://doly-dev.github.io/rc-hooks/site/#/async/use-async",target:"_blank",rel:"noopener noreferrer"},"useAsync",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))," \u4fdd\u6301\u4e00\u81f4\uff0c\u4e0e ",r.a.createElement("code",null,"hooks")," \u76f8\u6bd4\u6709\u4ee5\u4e0b\u533a\u522b\uff1a"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u4f7f\u7528 ",r.a.createElement("code",null,"Context")," \u7ba1\u7406\u72b6\u6001"),r.a.createElement("li",null,"\u53ef\u4ee5\u5728\u7ec4\u4ef6\u5916\u4f7f\u7528\u548c\u4fee\u6539"),r.a.createElement("li",null,"\u6ca1\u6709 ",r.a.createElement("code",null,"hooks")," \u7684\u751f\u547d\u5468\u671f"),r.a.createElement("li",null,"\u6ca1\u6709 ",r.a.createElement("code",null,"refreshDeps")," \u8bed\u6cd5\u7cd6"),r.a.createElement("li",null,"\u5728\u5355\u9875\u5e94\u7528\u4e2d\uff0c\u72b6\u6001\u53ef\u80fd\u5e94\u7528\u5728",r.a.createElement("code",null,"\u201c\u5168\u5c40\u201d"),"\uff0c\u9700\u8981\u6ce8\u610f\u6e05\u9664\u6216\u91cd\u65b0\u5b9e\u4f8b")),r.a.createElement("h2",{id:"\u5b89\u88c5"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u5b89\u88c5"},r.a.createElement("span",{className:"icon icon-link"})),"\u5b89\u88c5"),r.a.createElement(o.a,{code:"npm install mobx-async-state\n# or\nyarn add mobx-async-state\n",lang:"shell"}),r.a.createElement("h2",{id:"\u4f7f\u7528"},r.a.createElement("a",{"aria-hidden":"true",href:"#\u4f7f\u7528"},r.a.createElement("span",{className:"icon icon-link"})),"\u4f7f\u7528"),r.a.createElement(o.a,{code:'import AsyncState from "mobx-async-state";\n\nconst someAsyfnState = new AsyncState(someAsyncFn, options);\n',lang:"javascript"}),r.a.createElement("p",null,"\u66f4\u591a\u7528\u6cd5\u548c\u793a\u4f8b\uff0c\u8bf7",r.a.createElement("a",{href:"https://caijf.github.io/mobx-async-state/site/#/mobx-asnyc-state",target:"_blank",rel:"noopener noreferrer"},"\u67e5\u770b\u6587\u6863\u793a\u4f8b",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}))),"\uff01"),r.a.createElement("h2",{id:"api"},r.a.createElement("a",{"aria-hidden":"true",href:"#api"},r.a.createElement("span",{className:"icon icon-link"})),"API"),r.a.createElement("h3",{id:"result"},r.a.createElement("a",{"aria-hidden":"true",href:"#result"},r.a.createElement("span",{className:"icon icon-link"})),"Result"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u53c2\u6570"),r.a.createElement("th",null,"\u8bf4\u660e"),r.a.createElement("th",null,"\u7c7b\u578b"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"data"),r.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u9ed8\u8ba4\u4e3a ",r.a.createElement("code",null,"undefined"),"\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"any"))),r.a.createElement("tr",null,r.a.createElement("td",null,"error"),r.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570\u629b\u51fa\u7684\u5f02\u5e38\uff0c\u9ed8\u8ba4\u4e3a ",r.a.createElement("code",null,"undefined")),r.a.createElement("td",null,r.a.createElement("code",null,"any"))),r.a.createElement("tr",null,r.a.createElement("td",null,"loading"),r.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570\u6b63\u5728\u6267\u884c"),r.a.createElement("td",null,r.a.createElement("code",null,"boolean"))),r.a.createElement("tr",null,r.a.createElement("td",null,"params"),r.a.createElement("td",null,"\u6267\u884c\u5f02\u6b65\u51fd\u6570\u7684\u53c2\u6570\u6570\u7ec4\u3002\u6bd4\u5982\u4f60\u89e6\u53d1\u4e86 ",r.a.createElement("code",null,"run(1, 2, 3)"),"\uff0c\u5219 params \u7b49\u4e8e ",r.a.createElement("code",null,"[1, 2, 3]"),"\u3002",r.a.createElement("strong",null,"\u8be5\u503c\u672a\u88ab\u89c2\u5bdf\uff0c\u53d8\u66f4\u540e\u4e0d\u4f1a\u89e6\u53d1\u7ec4\u4ef6\u66f4\u65b0\u3002")),r.a.createElement("td",null,r.a.createElement("code",null,"array"))),r.a.createElement("tr",null,r.a.createElement("td",null,"run"),r.a.createElement("td",null,"\u624b\u52a8\u89e6\u53d1\u5f02\u6b65\u51fd\u6570\u3002",r.a.createElement("code",null,"debounce")," \u6a21\u5f0f\u4e0e ",r.a.createElement("code",null,"throttle")," \u6a21\u5f0f\u8fd4\u56de\u503c\u4e3a ",r.a.createElement("code",null,"Promise<null>")),r.a.createElement("td",null,r.a.createElement("code",null,"(...args) => Promise"))),r.a.createElement("tr",null,r.a.createElement("td",null,"cancel"),r.a.createElement("td",null,"\u53d6\u6d88\u5f53\u524d\u8bf7\u6c42\u3002\u5982\u679c\u6709\u8f6e\u8be2\uff0c\u505c\u6b62\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"() => void"))),r.a.createElement("tr",null,r.a.createElement("td",null,"refresh"),r.a.createElement("td",null,"\u4f7f\u7528\u4e0a\u4e00\u6b21\u7684 ",r.a.createElement("code",null,"params"),"\uff0c\u91cd\u65b0\u6267\u884c\u5f02\u6b65\u51fd\u6570\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"() => Promise"))),r.a.createElement("tr",null,r.a.createElement("td",null,"mutate"),r.a.createElement("td",null,"\u76f4\u63a5\u4fee\u6539 ",r.a.createElement("code",null,"data")),r.a.createElement("td",null,r.a.createElement("code",null,"(newData) => void")," / ",r.a.createElement("code",null,"((oldData) => newData) => void"))),r.a.createElement("tr",null,r.a.createElement("td",null,"destroy"),r.a.createElement("td",null,"\u53d6\u6d88\u5f53\u524d\u8bf7\u6c42\u53ca\u8ba2\u9605\uff08\u5982\u76d1\u542c\u89c6\u7a97\u7126\u70b9/\u663e\u793a\uff09\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"() => void"))))),r.a.createElement("h3",{id:"params"},r.a.createElement("a",{"aria-hidden":"true",href:"#params"},r.a.createElement("span",{className:"icon icon-link"})),"Params"),r.a.createElement("p",null,"\u6240\u6709\u914d\u7f6e\u9879\u90fd\u662f\u53ef\u9009\u7684\u3002"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u53c2\u6570"),r.a.createElement("th",null,"\u8bf4\u660e"),r.a.createElement("th",null,"\u7c7b\u578b"),r.a.createElement("th",null,"\u9ed8\u8ba4\u503c"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"autoRun"),r.a.createElement("td",null,"\u9ed8\u8ba4 ",r.a.createElement("code",null,"true"),"\u3002\u5373\u5728\u521d\u59cb\u5316\u65f6\u81ea\u52a8\u6267\u884c\u5f02\u6b65\u51fd\u6570\u3002\u5982\u679c\u4e3a ",r.a.createElement("code",null,"false"),"\uff0c\u5219\u9700\u8981\u624b\u52a8\u8c03\u7528 ",r.a.createElement("code",null,"run")," \u89e6\u53d1\u6267\u884c\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"boolean")),r.a.createElement("td",null,r.a.createElement("code",null,"true"))),r.a.createElement("tr",null,r.a.createElement("td",null,"initialData"),r.a.createElement("td",null,"\u9ed8\u8ba4\u7684 ",r.a.createElement("code",null,"data"),"\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"any")),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,"defaultParams"),r.a.createElement("td",null,"\u5982\u679c ",r.a.createElement("code",null,"autoRun=true")," \u81ea\u52a8\u6267\u884c ",r.a.createElement("code",null,"run")," \u7684\u9ed8\u8ba4\u53c2\u6570\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"array")),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,"formatResult"),r.a.createElement("td",null,"\u683c\u5f0f\u5316\u8bf7\u6c42\u7ed3\u679c"),r.a.createElement("td",null,r.a.createElement("code",null,"(data) => any")),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,"onSuccess"),r.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570 ",r.a.createElement("code",null,"resolve")," \u65f6\u89e6\u53d1\uff0c\u53c2\u6570\u4e3a ",r.a.createElement("code",null,"data")," \u548c ",r.a.createElement("code",null,"params"),"\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"(data, params) => void")),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,"onError"),r.a.createElement("td",null,"\u5f02\u6b65\u51fd\u6570\u62a5\u9519\u65f6\u89e6\u53d1\uff0c\u53c2\u6570\u4e3a ",r.a.createElement("code",null,"error")," \u548c ",r.a.createElement("code",null,"params")),r.a.createElement("td",null,r.a.createElement("code",null,"(error, parmams) => void")),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,"cacheKey"),r.a.createElement("td",null,"\u7f13\u5b58\u7684\u952e\u503c\uff0c\u542f\u7528\u7f13\u5b58\u673a\u5236\u3002\u5f02\u6b65\u6210\u529f\u7ed3\u679c\uff0c\u5c06\u88ab\u7f13\u5b58\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"string")),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,"cacheTime"),r.a.createElement("td",null,"\u7f13\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"number")),r.a.createElement("td",null,r.a.createElement("code",null,"5*60*1000"))),r.a.createElement("tr",null,r.a.createElement("td",null,"loadingDelay"),r.a.createElement("td",null,"\u8bbe\u7f6e ",r.a.createElement("code",null,"loading")," \u5ef6\u8fdf\u65f6\u95f4\uff0c\u907f\u514d\u95ea\u70c1\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"number")),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,"pollingInterval"),r.a.createElement("td",null,"\u8f6e\u8be2\u95f4\u9694\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002\u8bbe\u7f6e\u540e\uff0c\u5c06\u8fdb\u5165\u8f6e\u8be2\u6a21\u5f0f\uff0c\u5b9a\u65f6\u89e6\u53d1 ",r.a.createElement("code",null,"run")),r.a.createElement("td",null,r.a.createElement("code",null,"number")),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,"pollingWhenHidden"),r.a.createElement("td",null,"\u5728\u9875\u9762\u9690\u85cf\u65f6\uff0c\u662f\u5426\u7ee7\u7eed\u8f6e\u8be2\u3002\u9ed8\u8ba4\u4e3a ",r.a.createElement("code",null,"true"),"\uff0c\u5373\u4e0d\u4f1a\u505c\u6b62\u8f6e\u8be2",r.a.createElement("br",null),"\u5982\u679c\u8bbe\u7f6e\u4e3a ",r.a.createElement("code",null,"false"),"\uff0c\u5728\u9875\u9762\u9690\u85cf\u65f6\u4f1a\u6682\u65f6\u505c\u6b62\u8f6e\u8be2\uff0c\u9875\u9762\u91cd\u65b0\u663e\u793a\u65f6\u7ee7\u7eed\u4e0a\u6b21\u8f6e\u8be2"),r.a.createElement("td",null,r.a.createElement("code",null,"boolean")),r.a.createElement("td",null,"true")),r.a.createElement("tr",null,r.a.createElement("td",null,"refreshOnWindowFocus"),r.a.createElement("td",null,"\u5728\u5c4f\u5e55\u91cd\u65b0\u83b7\u53d6\u7126\u70b9\u6216\u91cd\u65b0\u663e\u793a\u65f6\uff0c\u662f\u5426\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002\u9ed8\u8ba4\u4e3a ",r.a.createElement("code",null,"false"),"\uff0c\u5373\u4e0d\u4f1a\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002",r.a.createElement("br",null),"\u5982\u679c\u8bbe\u7f6e\u4e3a ",r.a.createElement("code",null,"true"),"\uff0c\u5728\u5c4f\u5e55\u91cd\u65b0\u805a\u7126\u6216\u91cd\u65b0\u663e\u793a\u65f6\uff0c\u4f1a\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"boolean")),r.a.createElement("td",null,r.a.createElement("code",null,"false"))),r.a.createElement("tr",null,r.a.createElement("td",null,"focusTimespan"),r.a.createElement("td",null,"\u5c4f\u5e55\u91cd\u65b0\u805a\u7126\uff0c\u5982\u679c\u6bcf\u6b21\u90fd\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\uff0c\u4e0d\u662f\u5f88\u597d\uff0c\u6211\u4eec\u9700\u8981\u6709\u4e00\u4e2a\u65f6\u95f4\u95f4\u9694\uff0c\u5728\u5f53\u524d\u65f6\u95f4\u95f4\u9694\u5185\uff0c\u4e0d\u4f1a\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u3002\u9700\u8981\u914d\u7f6e ",r.a.createElement("code",null,"refreshOnWindowFocus")," \u4f7f\u7528\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"number")),r.a.createElement("td",null,r.a.createElement("code",null,"5000"))),r.a.createElement("tr",null,r.a.createElement("td",null,"debounceInterval"),r.a.createElement("td",null,"\u9632\u6296\u95f4\u9694, \u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u8bbe\u7f6e\u540e\uff0c\u8bf7\u6c42\u8fdb\u5165\u9632\u6296\u6a21\u5f0f\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"number")),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,"throttleInterval"),r.a.createElement("td",null,"\u8282\u6d41\u95f4\u9694, \u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u8bbe\u7f6e\u540e\uff0c\u8bf7\u6c42\u8fdb\u5165\u8282\u6d41\u6a21\u5f0f\u3002"),r.a.createElement("td",null,r.a.createElement("code",null,"number")),r.a.createElement("td",null,"-"))))))}},imjU:function(e,n,t){"use strict";t.r(n);t("+L6B");var a=t("2/Rp"),r=(t("5NDa"),t("5rEg")),l=(t("miYZ"),t("tsqr")),o=t("ODXe"),i=t("q1tI"),c=t.n(i),s=t("riab"),u=t("tjUo"),m=t("luuv"),d=t.n(m);function p(){return new Promise(e=>{setTimeout(()=>{e(d.a.mock("@name"))},1e3)})}function g(e){return console.log(e),new Promise(e=>{setTimeout(()=>{e({success:!0})},1e3)})}var h=new u["a"](p,{autoRun:!1}),f=new u["a"](g,{autoRun:!1});n["default"]=Object(s["a"])(()=>{var e=Object(i["useState"])(""),n=Object(o["a"])(e,2),t=n[0],s=n[1];Object(i["useEffect"])(()=>{h.run().then(e=>{s(e)})},[]);var u=Object(i["useCallback"])(e=>{f.run(e).then(e=>{e.success&&(h.mutate(f.params[0]),l["a"].success('The username was changed to "'.concat(f.params[0],'" !')))})},[]);return c.a.createElement("div",null,c.a.createElement("p",null,"usrename: ",h.data),c.a.createElement(r["a"],{onChange:e=>s(e.target.value),value:t,placeholder:"Please enter username",style:{width:240,marginRight:16}}),c.a.createElement(a["a"],{onClick:()=>u(t),loading:f.loading},"Edit"))})},ls1T:function(e,n,t){"use strict";t.r(n);t("OaEy");var a=t("2fM7"),r=t("q1tI"),l=t.n(r),o=t("riab"),i=t("tjUo"),c=t("luuv"),s=t.n(c);function u(e){return console.log(e),new Promise(e=>{setTimeout(()=>{e(s.a.mock({"data|5":["@email"]}).data)},300)})}var m=a["a"].Option,d=new i["a"](u,{debounceInterval:500,autoRun:!1});n["default"]=Object(o["a"])(()=>{var e=d.data,n=void 0===e?[]:e,t=d.run,r=d.loading,o=d.cancel;return l.a.createElement("div",null,l.a.createElement("p",null,"Enter quickly to see the effect"),l.a.createElement(a["a"],{showSearch:!0,placeholder:"Select Emails",filterOption:!1,onSearch:t,onBlur:o,loading:r,style:{width:300}},n.map(e=>l.a.createElement(m,{key:e,value:e},e))))})},"qng/":function(e,n,t){"use strict";t.r(n);t("g9YV");var a=t("wCAj"),r=t("wx14"),l=(t("+L6B"),t("2/Rp")),o=(t("OaEy"),t("2fM7")),i=(t("5NDa"),t("5rEg")),c=(t("y8nQ"),t("Vl3Y")),s=t("ODXe"),u=t("q1tI"),m=t.n(u),d=t("riab"),p=t("Op2u"),g=t("2PqJ"),h={labelCol:{span:4},wrapperCol:{span:14}},f={wrapperCol:{offset:4,span:14}},E=[{title:"name",dataIndex:"name"},{title:"email",dataIndex:"email"},{title:"id",dataIndex:"id"},{title:"gender",dataIndex:"gender"}],v=new p["a"](g["a"]);n["default"]=Object(d["a"])(()=>{var e=v.run,n=v.refresh,t=v.data,d=v.loading,p=v.pagination,g=v.changePagination,b=c["a"].useForm(),y=Object(s["a"])(b,1),S=y[0],w=Object(u["useCallback"])(()=>{S.resetFields(),e(S.getFieldsValue())},[]);return m.a.createElement("div",null,m.a.createElement(c["a"],Object(r["a"])({},h,{form:S,initialValues:{},onFinish:e}),m.a.createElement(c["a"].Item,{label:"name",name:"name"},m.a.createElement(i["a"],{placeholder:"\u8bf7\u8f93\u5165"})),m.a.createElement(c["a"].Item,{label:"gender",name:"gender"},m.a.createElement(o["a"],{placeholder:"\u8bf7\u9009\u62e9"},m.a.createElement(o["a"].Option,{value:"male"},"male"),m.a.createElement(o["a"].Option,{value:"female"},"female"))),m.a.createElement(c["a"].Item,f,m.a.createElement(l["a"],{type:"primary",htmlType:"submit",loading:d},"\u67e5\u8be2"),m.a.createElement(l["a"],{onClick:w,style:{marginLeft:16},disabled:d},"\u91cd\u7f6e"),m.a.createElement(l["a"],{onClick:n,style:{marginLeft:16},disabled:d},"\u5237\u65b0"))),m.a.createElement(a["a"],{dataSource:t||[],columns:E,pagination:p,onChange:g,loading:d,rowKey:"id",bordered:!0}))})},rOkl:function(e,n,t){"use strict";t.r(n);t("+L6B");var a=t("2/Rp"),r=(t("T2oS"),t("W9HT")),l=(t("Mwp2"),t("VXEj")),o=(t("tU7J"),t("wFql")),i=t("q1tI"),c=t.n(i),s=t("riab"),u=t("wbB8"),m=t("2PqJ"),d=new u["a"](m["a"],{defaultPageSize:5,autoRun:!1});n["default"]=Object(s["a"])(()=>{var e=d.run,n=d.data,t=d.loading,s=d.loadingMore,u=d.done,m=d.loadMore;return Object(i["useEffect"])(()=>{e({someParams:1})},[]),c.a.createElement("div",null,c.a.createElement(r["a"],{spinning:t&&!s},c.a.createElement(l["b"],{dataSource:n,renderItem:e=>c.a.createElement(l["b"].Item,{key:e.id},c.a.createElement(o["a"].Text,{mark:!0},"[",e.id,"]")," ",e.name)})),c.a.createElement(a["a"],{onClick:()=>m(),loading:s,disabled:u},"click to load more"))})},szVp:function(e,n,t){"use strict";t.r(n);t("T2oS");var a=t("W9HT"),r=(t("+L6B"),t("2/Rp")),l=t("ODXe"),o=t("q1tI"),i=t.n(o),c=t("riab"),s=t("tjUo"),u=t("luuv"),m=t.n(u);function d(){return new Promise(e=>{setTimeout(()=>{e({data:m.a.mock("@paragraph"),time:(new Date).getTime()})},1e3)})}var p=new s["a"](d,{autoRun:!1,cacheKey:"article"});n["default"]=Object(c["a"])(()=>{var e=Object(o["useState"])(!1),n=Object(l["a"])(e,2),t=n[0],a=n[1],c=p.run;return i.a.createElement("div",null,i.a.createElement("p",null,"When the mouse hovers over the button, the article data is preloaded."),i.a.createElement("p",null,i.a.createElement(r["a"],{onMouseEnter:()=>c(),onClick:()=>a(e=>!e)},"show/hidden")),t&&i.a.createElement(g,null))});var g=Object(c["a"])(()=>{var e=p.data,n=p.loading;return i.a.createElement(a["a"],{spinning:!e&&n},i.a.createElement("p",null,"Latest request time: ",null===e||void 0===e?void 0:e.time),i.a.createElement("p",null,null===e||void 0===e?void 0:e.data))})},tB8F:function(e,n,t){"use strict";t.r(n);t("Xn8V"),t("6spV"),t("wpse"),t("KUpu"),t("8OGu"),t("n7Qr"),t("VQRL"),t("SGZ1"),t("nEGZ"),t("IC/V"),t("H8Ov"),t("aHGi"),t("0O5u"),t("5qeZ"),t("NYJX"),t("mLN8"),t("YJpY"),t("7V/p"),t("dLjG"),t("fF/C"),t("CDr+"),t("FbcW"),t("wwZZ"),t("+l9e"),t("vnQr"),t("5Blz"),t("X6vt"),t("hilM"),t("wdPq"),t("u6eR"),t("v/6r"),t("fDrP"),t("1vuE"),t("Q3OH"),t("nDqD"),t("4rKd"),t("X5kU"),t("4Mzw"),t("Pp3M"),t("v0/P"),t("sdAH"),t("EgRx"),t("izsi"),t("xtlo"),t("p1ln"),t("ZahQ"),t("nZC5"),t("HjuX"),t("A9H8"),t("B/G0"),t("Dyhc"),t("WQuA"),t("Qqe/"),t("J428"),t("s1ay"),t("Rw1i"),t("quHW"),t("YjZU"),t("O9az"),t("2KAr"),t("3dhw"),t("zTPR"),t("rpUR"),t("9/ry"),t("z9fm"),t("43iI"),t("mcGr"),t("rUU2"),t("6cL7"),t("ZDb2"),t("EOz7"),t("JI6M"),t("beyn"),t("A+b4"),t("3Us1"),t("eP3D"),t("Mn2j"),t("BtTS"),t("yiTY"),t("Uc1W"),t("y36+"),t("gweS"),t("URK0"),t("1jPx"),t("8Lo7"),t("I5+W"),t("ti1D"),t("NQz/"),t("UHn5"),t("/vMi"),t("nkhd"),t("+u1y"),t("9BQv"),t("Tz1E"),t("U9fH"),t("+4le"),t("jIZW"),t("oYEA"),t("7yTQ"),t("jHRr"),t("Rka6"),t("8Ubs"),t("FK48"),t("Auwt"),t("KAxK"),t("/0sN"),t("VvX1"),t("2aV/"),t("aKtI"),t("VUky"),t("9bAj"),t("xF6R"),t("Dbv2"),t("KHCi"),t("i/DM"),t("hYqy"),t("JXee"),t("+Hw1"),t("FBts"),t("3UWB"),t("S5nV"),t("xD7I"),t("aNdP"),t("UIoa"),t("Osgv"),t("FKIO"),t("Sf9Y"),t("VuYY"),t("ue5M"),t("80Z6"),t("qkSU"),t("xaQh"),t("GPZX"),t("eCow"),t("/R3g"),t("0pSW"),t("85tw"),t("UvYY"),t("DVoG"),t("aLaE"),t("fQri"),t("RDHo"),t("9Rzw"),t("iMhB"),t("/mKc"),t("u6Ie"),t("9znl"),t("+GPJ"),t("haHa"),t("RhWa"),t("PUJJ"),t("YceZ"),t("jksQ"),t("FuvP"),t("Uq4z"),t("+2a4"),t("Gw+j"),t("CO2k"),t("rVgK"),t("ecuC"),t("HQPm"),t("IbaC"),t("s00F"),t("V0Bj"),t("hwEL"),t("d/5L"),t("oJGl"),t("6FCX"),t("OAmA"),t("p6E5"),t("Xxk+"),t("L5O0"),t("bcvT"),t("CRpX"),t("aRU8"),t("p5yU"),t("dnZx"),t("NMu4"),t("5JgN"),t("ls82");var a=t("bCY9"),r=t("FfOG"),l=t("LtsZ"),o=t("zlVK"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].applyPlugins({key:"render",type:l["ApplyPluginsType"].compose,initialValue:()=>Object(o["renderClient"])({routes:t("ujla").routes,plugin:a["a"],history:Object(r["a"])(e.hot),isServer:Object({NODE_ENV:"production"}).__IS_SERVER,rootElement:"root",defaultTitle:"mobx-async-state"}),args:e})},c=i();n["default"]=c();window.g_umi={version:"3.2.7"}},tjUo:function(e,n,t){"use strict";var a=t("VTBJ"),r=t("2vnA"),l={},o=3e5,i=e=>l[e]?l[e].data:void 0,c=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;l[e]&&clearTimeout(l[e].timer);var a=setTimeout(()=>{delete l[e]},t);l[e]={data:n,timer:a}};function s(){return"undefined"===typeof document||"undefined"===typeof document.visibilityState||"hidden"!==document.visibilityState}function u(){return"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine}var m=[];function d(e){return m.push(e),function(){var n=m.indexOf(e);m.splice(n,1)}}var p=!1;if("undefined"!==typeof window&&window.addEventListener&&!p){var g=()=>{if(s()&&u())for(var e=0;e<m.length;e++){var n=m[e];n()}};window.addEventListener("visibilitychange",g,!1),window.addEventListener("focus",g,!1),p=!0}var h=d,f=[];function E(e){return f.push(e),function(){var n=f.indexOf(e);f.splice(n,1)}}var v=!1;if("undefined"!==typeof window&&window.addEventListener&&!v){var b=()=>{if(s())for(var e=0;e<f.length;e++){var n=f[e];n()}};window.addEventListener("visibilitychange",b,!1),v=!0}var y=E;function S(e,n){var t=null;function a(){clearTimeout(t)}function r(){for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];var o=this;clearTimeout(t),t=setTimeout(()=>{e.call(o,...r)},n)}return r.cancel=a,r}function w(e,n){var t,a,r=null,l=!1;function o(){clearTimeout(r),l=!1}function i(){if(a=arguments,!l){var o=+new Date,i=this;t&&o<t+n?(l=!0,r=setTimeout(()=>{t=o,l=!1,e.apply(i,a)},n)):(t=o,e.apply(i,a))}}return i.cancel=o,i}var x=()=>{};class k{constructor(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.asyncFn=e,this.options=Object(a["a"])({defaultParams:[],defaultLoading:!1,onSuccess:x,onError:x,autoRun:!0,cacheKey:"",cacheTime:3e5,pollingInterval:0,pollingWhenHidden:!0,refreshOnWindowFocus:!1,focusTimespan:5e3},n);var t=this.options,r=t.defaultParams,l=t.defaultLoading,o=t.initialData,c=t.cacheKey,s=t.debounceInterval,u=t.throttleInterval,m=t.focusTimespan,d=t.pollingInterval,p=t.refreshOnWindowFocus;if(this.__requestCount=0,this.params=Array.isArray(r)?r:r?[r]:[],this.originData=c?i(c):o,this.originError=null,this.loading=l,this.debounceRun=s?S(this._run.bind(this),s):void 0,this.throttleRun=u?w(this._run.bind(this),u):void 0,this.pollingTimer=null,this.pollingWhenVisibleFlag=!1,this.loadingDelayTimer=null,this.unsubscribe=[],d&&this.unsubscribe.push(y(this.rePolling.bind(this))),p){var g=w(this.refresh.bind(this),m);this.unsubscribe.push(h(g))}this._run=this._run.bind(this),this.run=this.run.bind(this),this.cancel=this.cancel.bind(this),this.rePolling=this.rePolling.bind(this),this.mutate=this.mutate.bind(this),this.refresh=this.refresh.bind(this),this.destroy=this.destroy.bind(this),this.options.autoRun&&this.run(...this.params)}get data(){return Object(r["toJS"])(this.originData)}get error(){return Object(r["toJS"])(this.originError)}rePolling(){this.pollingWhenVisibleFlag&&(this.pollingWhenVisibleFlag=!1,this.refresh())}run(){return this.debounceRun?(this.debounceRun(...arguments),Promise.resolve(null)):this.throttleRun?(this.throttleRun(...arguments),Promise.resolve(null)):this._run(...arguments)}_run(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=this.options,l=a.loadingDelay,o=a.formatResult,i=a.cacheKey,u=a.cacheTime,m=a.onSuccess,d=a.onError,p=a.pollingInterval,g=a.pollingWhenHidden;this.pollingTimer&&clearTimeout(this.pollingTimer),this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer),this.__requestCount+=1;var h=this.__requestCount;return this.params=n,this.loading=!l,this.loadingDelayTimer=l?setTimeout(()=>{this.loading=!0},l):null,new Promise((e,t)=>{this.asyncFn(...n).then(n=>{if(h===this.__requestCount){this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer);var t="function"===typeof o?o(n):n;Object(r["runInAction"])(()=>{this.loading=!1,this.originData=t,this.originError=null}),i&&c(i,t,u),"function"===typeof m&&m(t,this.params),e(t)}}).catch(e=>{h===this.__requestCount&&(this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer),Object(r["runInAction"])(()=>{this.loading=!1,this.originError=e}),"function"===typeof d&&d(e,this.params),t(e))}).finally(()=>{if(h===this.__requestCount&&p){if(!s()&&!g)return void(this.pollingWhenVisibleFlag=!0);this.pollingTimer=setTimeout(()=>{this.run(...n)},p)}})})}cancel(){this.debounceRun&&this.debounceRun.cancel(),this.throttleRun&&this.throttleRun.cancel(),this.pollingTimer&&clearTimeout(this.pollingTimer),this.loadingDelayTimer&&clearTimeout(this.loadingDelayTimer),this.pollingWhenVisibleFlag=!1,this.__requestCount+=1,this.loading=!1}destroy(){this.cancel(),this.unsubscribe.forEach(e=>e())}refresh(){return this.run(...this.params)}mutate(e){this.originData="function"===typeof e?e(this.data):e}}var P=Object(r["decorate"])(k,{loading:r["observable"],originError:r["observable"],originData:r["observable"],error:r["computed"],data:r["computed"],_run:r["action"],cancel:r["action"],refresh:r["action"],mutate:r["action"]});n["a"]=P},ujla:function(e,n,t){"use strict";t.r(n),t.d(n,"routes",(function(){return o}));var a=t("VTBJ"),r=t("LtsZ"),l=t("bCY9"),o=[{path:"/_demos/default",component:t("7RaP").default,exact:!0},{path:"/_demos/auto-run",component:t("VSD4").default,exact:!0},{path:"/_demos/preload",component:t("szVp").default,exact:!0},{path:"/_demos/refresh-on-window-focus",component:t("xGZ8").default,exact:!0},{path:"/_demos/polling-interval",component:t("erZ4").default,exact:!0},{path:"/_demos/debounce-interval",component:t("ls1T").default,exact:!0},{path:"/_demos/throttle-interval",component:t("RJxA").default,exact:!0},{path:"/_demos/mutate",component:t("imjU").default,exact:!0},{path:"/_demos/loading-delay",component:t("aTMo").default,exact:!0},{path:"/_demos/parallel",component:t("96It").default,exact:!0},{path:"/_demos/pagination1",component:t("AU+R").default,exact:!0},{path:"/_demos/pagination2",component:t("qng/").default,exact:!0},{path:"/_demos/pagination3",component:t("QndZ").default,exact:!0},{path:"/_demos/load-more1",component:t("rOkl").default,exact:!0},{path:"/_demos/load-more2",component:t("L3Xe").default,exact:!0},{path:"/",component:e=>t("q1tI").createElement(t("09U7").default,Object(a["a"])(Object(a["a"])({},{menus:{"*":{"*":[{path:"/",title:"README",meta:{order:null}},{title:"mobx-asnyc-state",path:"/mobx-asnyc-state",meta:{order:1},children:[]}]}},locales:[],navs:{},title:"mobx-async-state",logo:"https://www.caijinfeng.com/assets/images/logo-doly@3x.png",mode:"doc",repoUrl:"https://github.com/caijf/mobx-async-state"}),e)),routes:[{path:"/",component:t("gql7").default,exact:!0,meta:{locale:"zh-CN",title:"README",order:null},title:"README"},{path:"/mobx-asnyc-state",component:t("Jqcq").default,exact:!0,meta:{filePath:"src/index.md",updatedTime:1601361437e3,title:"mobx-asnyc-state",group:{title:"mobx-asnyc-state",path:"/mobx-asnyc-state",order:1},slugs:[{depth:1,value:"mobx-asnyc-state",heading:"mobx-asnyc-state"},{depth:2,value:"\u26a0\ufe0f \u6ce8\u610f\u4e8b\u9879",heading:"\ufe0f-\u6ce8\u610f\u4e8b\u9879"},{depth:2,value:"\u4ee3\u7801\u6f14\u793a",heading:"\u4ee3\u7801\u6f14\u793a"},{depth:3,value:"\u9ed8\u8ba4\u8bf7\u6c42",heading:"\u9ed8\u8ba4\u8bf7\u6c42"},{depth:3,value:"\u624b\u52a8\u89e6\u53d1",heading:"\u624b\u52a8\u89e6\u53d1"},{depth:3,value:"\u7f13\u5b58 & \u9884\u52a0\u8f7d",heading:"\u7f13\u5b58--\u9884\u52a0\u8f7d"},{depth:3,value:"\u5c4f\u5e55\u805a\u7126\u91cd\u65b0\u8bf7\u6c42",heading:"\u5c4f\u5e55\u805a\u7126\u91cd\u65b0\u8bf7\u6c42"},{depth:3,value:"\u8f6e\u8be2",heading:"\u8f6e\u8be2"},{depth:3,value:"\u9632\u6296",heading:"\u9632\u6296"},{depth:3,value:"\u8282\u6d41",heading:"\u8282\u6d41"},{depth:3,value:"\u7a81\u53d8",heading:"\u7a81\u53d8"},{depth:3,value:"Loading Delay",heading:"loading-delay"},{depth:3,value:"\u5e76\u884c\u8bf7\u6c42",heading:"\u5e76\u884c\u8bf7\u6c42"},{depth:2,value:"API",heading:"api"},{depth:3,value:"Result",heading:"result"},{depth:3,value:"Params",heading:"params"},{depth:2,value:"\u6269\u5c55\u7528\u6cd5",heading:"\u6269\u5c55\u7528\u6cd5"},{depth:3,value:"\u5206\u9875",heading:"\u5206\u9875"},{depth:4,value:"PaginationState",heading:"paginationstate"},{depth:4,value:"API",heading:"api-1"},{depth:4,value:"Result",heading:"result-1"},{depth:4,value:"Params",heading:"params-1"},{depth:3,value:"\u52a0\u8f7d\u66f4\u591a",heading:"\u52a0\u8f7d\u66f4\u591a"},{depth:4,value:"LoadMoreState",heading:"loadmorestate"},{depth:4,value:"API",heading:"api-2"},{depth:4,value:"Result",heading:"result-2"},{depth:4,value:"Params",heading:"params-2"}]},title:"mobx-asnyc-state"}],title:"mobx-async-state"}];l["a"].applyPlugins({key:"patchRoutes",type:r["ApplyPluginsType"].event,args:{routes:o}})},wbB8:function(e,n,t){"use strict";var a=t("VTBJ"),r=t("Ff2n"),l=t("2vnA"),o=t("tjUo");class i{constructor(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.defaultParams,l=n.defaultPageSize,i=void 0===l?10:l,c=Object(r["a"])(n,["defaultParams","defaultPageSize"]);this.page={pageNum:1,pageSize:i,total:0},this.params=t,this.originData=[],this._async=new o["a"](e,Object(a["a"])(Object(a["a"])({},c),{},{autoRun:!1,onSuccess:(e,n)=>{this.page.total=e.pageInfo?e.pageInfo.total:0,1===this.page.pageNum?this.originData=e.data:this.originData=this.originData.concat(e.data),this.page.pageSize*this.page.pageNum>=this.page.total&&(this.done=!0),c.onSuccess&&c.onSuccess(e,n)},onError:(e,n)=>{this.page.pageNum>1&&(this.page.pageNum-=1),c.onError&&c.onError(e,n)}})),this.run=this.run.bind(this),this.loadMore=this.loadMore.bind(this),this.reload=this.reload.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.refresh=this.reload,this.mutate=this._async.mutate,("undefined"===typeof c.autoRun||c.autoRun)&&this.run(t)}get data(){return Object(l["toJS"])(this.originData)}get loading(){return this._async.loading}get loadingMore(){return this.loading&&1!==this.page.pageNum}get error(){return this._async.error}get pagination(){var e=this.page,n=e.pageNum,t=Object(r["a"])(e,["pageNum"]);return Object(a["a"])({current:n},t)}run(e){this.params=e;var n=this.page,t=n.pageNum,a=n.pageSize;return this._async.run({page:{pageNum:t,pageSize:a},data:this.params})}loadMore(){if(!this.done&&!this.loading)return this.page.pageNum+=1,this.run(this.params)}reload(){return this.done=!1,this.cancel(),this.page.pageNum=1,this.run(this.params)}cancel(){this.loading&&this.page.pageNum>1&&(this.page.pageNum-=1),this._async.cancel()}destroy(){this.cancel(),this._async.destroy()}}n["a"]=Object(l["decorate"])(i,{page:l["observable"],done:l["observable"],originData:l["observable"],data:l["computed"],loading:l["computed"],loadingMore:l["computed"],pagination:l["computed"],error:l["computed"],loadMore:l["action"],reload:l["action"]})},xGZ8:function(e,n,t){"use strict";t.r(n);t("T2oS");var a=t("W9HT"),r=t("q1tI"),l=t.n(r),o=t("riab"),i=t("tjUo"),c=t("luuv"),s=t.n(c);function u(){return new Promise(e=>{setTimeout(()=>{e(s.a.mock("@name"))},1e3)})}var m=new i["a"](u,{refreshOnWindowFocus:!0});n["default"]=Object(o["a"])(()=>{var e=m.data,n=m.loading;return l.a.createElement("div",null,l.a.createElement("p",null,"You can try to click elsewhere and click back to try. (Or hide the page and show it again)"),l.a.createElement(a["a"],{spinning:n},l.a.createElement("div",null,"Username: ",e)))})}});